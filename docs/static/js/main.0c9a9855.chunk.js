(this.webpackJsonp8connect4=this.webpackJsonp8connect4||[]).push([[0],{110:function(e,t,n){},116:function(e){e.exports=JSON.parse('"wss://8c4server.ocean.lol"')},141:function(e,t,n){},183:function(e,t,n){},184:function(e,t,n){"use strict";n.r(t);n(140),n(141);var a=n(127),r=Object(a.a)({palette:{type:"dark",background:{default:"#050505"},primary:{main:"#d49a3d"}},overrides:{MuiButton:{textPrimary:{background:"linear-gradient(45deg, #ff7b00 0%, #ff00ff 100%)",borderRadius:3,border:0,color:"white !important",padding:"0 30px",boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)"},textSecondary:{background:"linear-gradient(45deg, rgb(255,37,180) 30%, rgb(198,19,19) 90%)",borderRadius:3,border:0,color:"white !important",padding:"0 30px",boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)"}}}}),c=n(1),i=n(0),o=n.n(i),s=n(11),l=n.n(s),d=n(232),m=n(231),j=n(115),u=n.n(j),h=n(116),b=n(22),f=n.n(b),p=n(40),g=n(51),x=n(65),O=n(66),y=n(38),v=n(79),I=n(78),w=n(5),C=n(186),N=n(252),k=n(230),B=n(228),T=n(229),E=n(227),A=function(e){Object(v.a)(n,e);var t=Object(I.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state={open:!1},a.handleOpen=a.handleOpen.bind(Object(y.a)(a)),a.handleClose=a.handleClose.bind(Object(y.a)(a)),a}return Object(O.a)(n,[{key:"handleOpen",value:function(){this.setState({open:!0})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){var e=this.props.classes;return Object(c.jsx)("div",{children:Object(c.jsxs)(N.a,{open:this.state.open,onClose:this.handleClose,disablePortal:!0,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",disableBackdropClick:this.props.required,disableEscapeKeyDown:this.props.required,children:[Object(c.jsx)(E.a,{id:"alert-dialog-title",children:this.props.title}),Object(c.jsxs)(B.a,{dividers:!0,children:[Object(c.jsx)(T.a,{className:e.text,id:"alert-dialog-description",children:this.props.description}),this.props.children]}),Object(c.jsxs)(k.a,{children:[this.props.required?null:Object(c.jsx)(C.a,{onClick:this.handleClose,color:"secondary",children:"Close"}),this.props.buttonText?Object(c.jsx)(C.a,{onClick:this.props.buttonAction,color:"primary",children:this.props.buttonText}):null]})]})})}}]),n}(o.a.Component),M=Object(w.a)((function(e){return{text:{margin:0}}}))(A);function S(){return L.apply(this,arguments)}function L(){return(L=Object(g.a)(f.a.mark((function e(){var t,n,a=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:null,e.abrupt("return",new Promise(function(){var e=Object(g.a)(f.a.mark((function e(a){var i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.assign({title:"Dialog title",required:!1},t),l.a.render(Object(c.jsxs)(m.a,{theme:r,children:[Object(c.jsx)(d.a,{}),Object(c.jsx)(M,Object(p.a)(Object(p.a)({},t),{},{ref:function(e){return i=e},children:n}))]}),document.getElementById("dialog")),i?(i.handleOpen(),a(i)):setTimeout(Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,S(t,n);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)}))),100);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W=S,z=(n(110),n(233));var G=function(){return Object(c.jsxs)("div",{className:"centred",children:[Object(c.jsx)(z.a,{}),Object(c.jsx)("h3",{children:"Attempting to connect to the 8connect4 server..."})]})},R=n(71),P=n.n(R);var D=function(e){return Object(c.jsxs)("div",{className:"centred",children:[Object(c.jsx)(P.a,{}),Object(c.jsx)("h3",{children:"Failed to connect to the 8connect4 server."}),e.error?Object(c.jsxs)("p",{children:['Error: "',e.error,'"']}):null,Object(c.jsx)("h4",{children:"Are you offline? If not, the 8connect4 server might be down."}),Object(c.jsx)(C.a,{size:"large",color:"primary",onClick:function(){return window.location.reload(!1)},children:"Retry"})]})},F=n(80),H=n(241),J=n(237),q=n(4),K=n(254),U=n(235),Y=n(234),_=n(236),V=n(188),X=n(118),Q=n.n(X),Z=function(e){Object(v.a)(n,e);var t=Object(I.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state={code:""},a.changeInput=a.changeInput.bind(Object(y.a)(a)),a.tryCode=a.tryCode.bind(Object(y.a)(a)),a}return Object(O.a)(n,[{key:"changeInput",value:function(e){var t=e.target.value;t=t.replace(" ",""),this.setState({code:t})}},{key:"tryCode",value:function(){Vt.emit("joinMatch",this.state.code)}},{key:"componentDidMount",value:function(){var e=this;window.location.search.length>1&&(this.setState({code:window.location.search.slice(1)},(function(){return e.tryCode()})),window.history.pushState("","","/"))}},{key:"render",value:function(){var e=this,t=this.props.classes;return Object(c.jsxs)("div",{children:[Object(c.jsx)("label",Object(p.a)(Object(p.a)({},{}),{},{htmlFor:"roomCodeInput",children:"Or, join by code:"})),Object(c.jsx)("br",{}),Object(c.jsxs)(K.a,{className:Object(q.a)(t.margin,t.textField),variant:"filled",children:[Object(c.jsx)(Y.a,{htmlFor:"roomCodeInput",children:"Room code"}),Object(c.jsx)(U.a,{id:"roomCodeInput",type:"text",value:this.state.code,onChange:this.changeInput,autoComplete:"off",inputProps:{className:t.textInput,maxLength:6,onKeyDown:function(t){"Enter"==t.key&&e.tryCode()}},endAdornment:Object(c.jsx)(_.a,{position:"end",children:Object(c.jsx)(V.a,{"aria-label":"Join",onClick:this.tryCode,edge:"end",children:Object(c.jsx)(Q.a,{})})})})]})]})}}]),n}(o.a.Component),$=Object(w.a)((function(e){return{margin:{margin:e.spacing(1),marginBottom:0},joinLabel:{display:"inline-block",marginTop:22,marginRight:4},textField:{width:"18ch"},textInput:{textTransform:"uppercase"}}}))(Z),ee=n(23),te=n(250),ne=n(238),ae=n(119),re=n.n(ae),ce=Object(J.a)((function(e){return{margin:{margin:e.spacing(1)},input:{width:170},label:{textAlign:"center"}}}));var ie=function(){var e=ce(),t=o.a.useState(localStorage.name?localStorage.name:""),n=Object(ee.a)(t,2),a=n[0],r=n[1],i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t||r(e),localStorage.name=e,Vt.emit("changeName",e)};return i(a,!0),Object(c.jsx)("div",{className:e.margin,children:Object(c.jsxs)(ne.a,{container:!0,justify:"center",spacing:1,alignItems:"flex-end",children:[Object(c.jsx)(ne.a,{item:!0,children:Object(c.jsx)(re.a,{})}),Object(c.jsx)(ne.a,{item:!0,children:Object(c.jsx)(te.a,{id:"nameInput",label:"Your name",value:a,onChange:function(e){return i(e.target.value)},autoComplete:"off",inputProps:{className:e.input,maxLength:12,onKeyDown:function(e){"Enter"==e.key&&document.activeElement.blur()}},InputLabelProps:{className:e.label}})})]})})},oe=n(24),se=n(240),le=n(187),de=n(242),me=n(255),je=n(243),ue=n(251),he=n(76),be=n.n(he),fe=n(74),pe=n.n(fe),ge=[1,25],xe=[1,4],Oe=Object(J.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:300},selectEmpty:{marginTop:e.spacing(2)}}})),ye=[1,2,3,5,8,12,15,20,30,45,60,120],ve=function(e){return"".concat(ye[e],"s")},Ie=Object(p.a)({public:!1,players:9,gameMax:4,turnTime:8,runDownTimer:!0},localStorage.MatchOptions?JSON.parse(localStorage.MatchOptions):{});function we(e){return Object(c.jsxs)(se.a,{size:"small",children:[Object(c.jsx)(C.a,{onClick:function(){return e.fn(-10)},disabled:e.state==e.min,children:"- -"}),Object(c.jsx)(C.a,{onClick:function(){return e.fn(-1)},disabled:e.state==e.min,children:"-"}),Object(c.jsx)(C.a,{disabled:!0,children:e.state}),Object(c.jsx)(C.a,{onClick:function(){return e.fn(1)},disabled:e.state==e.max,children:"+"}),Object(c.jsx)(C.a,{onClick:function(){return e.fn(10)},disabled:e.state==e.max,children:"++"})]})}function Ce(){var e=Oe(),t=o.a.useState(Ie.public),n=Object(ee.a)(t,2),a=n[0],r=n[1],i=o.a.useState(Ie.players),s=Object(ee.a)(i,2),l=s[0],d=s[1],m=o.a.useState(Ie.gameMax),j=Object(ee.a)(m,2),u=j[0],h=j[1],b=o.a.useState(ye.indexOf(Ie.turnTime)),f=Object(ee.a)(b,2),p=f[0],g=f[1],x=o.a.useState(Ie.runDownTimer),O=Object(ee.a)(x,2),y=O[0],v=O[1];return Object(c.jsxs)("div",{children:[Object(c.jsx)(H.a,{style:{marginTop:16,marginBottom:8}}),Object(c.jsx)(le.a,{children:"Privacy"}),Object(c.jsx)(F.a,{component:"div",children:Object(c.jsxs)(ne.a,{component:"label",container:!0,alignItems:"center",spacing:1,children:[Object(c.jsx)(ne.a,{item:!0,children:Object(c.jsx)(pe.a,{})}),Object(c.jsx)(ne.a,{item:!0,children:Object(c.jsx)(de.a,{color:"primary",checked:a,onChange:function(e){Ie.public=!a,r(!a)}})}),Object(c.jsx)(ne.a,{item:!0,children:Object(c.jsx)(be.a,{})})]})}),Object(c.jsx)(H.a,{}),Object(c.jsxs)(K.a,{className:e.formControl,children:[Object(c.jsx)(le.a,{style:{marginBottom:5},children:"Max players"}),Object(c.jsx)(we,{fn:function(e){Ie.players+=e,Ie.players<ge[0]&&(Ie.players=ge[0]),Ie.players>ge[1]&&(Ie.players=ge[1]),d(Ie.players)},min:ge[0],max:ge[1],state:l})]}),Object(c.jsx)(H.a,{}),Object(c.jsxs)(K.a,{className:e.formControl,children:[Object(c.jsx)(le.a,{style:{marginBottom:5},children:"Max games per player per colour"}),Object(c.jsx)(we,{fn:function(e){Ie.gameMax+=e,Ie.gameMax<xe[0]&&(Ie.gameMax=xe[0]),Ie.gameMax>xe[1]&&(Ie.gameMax=xe[1]),h(Ie.gameMax)},min:xe[0],max:xe[1],state:u})]}),Object(c.jsx)(H.a,{style:{marginBottom:8}}),Object(c.jsx)(le.a,{children:"Turn time"}),Object(c.jsx)(me.a,{value:p,onChange:function(e,t){Ie.turnTime=ye[t],g(t)},step:null,marks:Object(oe.a)(ye.keys()).map((function(e){return{value:e,label:String(ye[e])}})),min:0,max:ye.length-1,getAriaValueText:ve,valueLabelFormat:ve,valueLabelDisplay:"auto"}),Object(c.jsx)(H.a,{style:{marginBottom:8}}),Object(c.jsx)(je.a,{control:Object(c.jsx)(ue.a,{color:"primary",checked:y,onChange:function(e){Ie.runDownTimer=!y,v(!y)}}),label:"Always run down turn timer?",labelPlacement:"start"})]})}function Ne(){return(Ne=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W({title:"Create Match",description:"Match options:",buttonText:"Create",buttonAction:function(){t.handleClose(),localStorage.MatchOptions=JSON.stringify(Ie),Vt.emit("createMatch",Ie)}},Object(c.jsx)(Ce,{}));case 2:t=e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ke=function(){return Ne.apply(this,arguments)},Be=Object(J.a)({logoImage:{display:"block",textAlign:"center",margin:"auto",maxWidth:350},controls:{textAlign:"center",border:"1px solid #ffffff1f",borderRadius:10}});var Te=function(){var e=Be();return Object(c.jsxs)("div",{children:[Object(c.jsx)(F.a,{className:e.title,variant:"h3",gutterBottom:!0,children:Object(c.jsx)("img",{className:e.logoImage,src:"/iconanimated.png",alt:"8connect4"})}),Object(c.jsx)(F.a,{variant:"body1",gutterBottom:!0,children:"Play 8 games of connect 4 at once."}),Object(c.jsxs)("div",{className:e.controls,children:[Object(c.jsx)(ie,{}),Object(c.jsx)(H.a,{}),Object(c.jsx)("br",{}),Object(c.jsx)(C.a,{size:"large",color:"primary",onClick:function(){return Vt.emit("findMatch")},children:"Find Match"}),Object(c.jsx)("br",{}),Object(c.jsx)(C.a,{size:"small",color:"secondary",onClick:ke,children:"Create Match"}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsx)($,{})]})]})},Ee=n(244),Ae=n(245),Me=n(253),Se=n(246),Le=n(185),We=n(247),ze=n(248),Ge=n(239),Re=n(249),Pe=n(124),De=n.n(Pe),Fe=n(122),He=n.n(Fe),Je=n(123),qe=n.n(Je),Ke=n(125),Ue=n.n(Ke),Ye=n(120),_e=n.n(Ye),Ve=Object(J.a)({root:{textAlign:"center"},privacyIcon:{marginRight:10},table:{width:400,margin:"auto"},head:{backgroundColor:"black"},tableCell:{textAlign:"center"},you:{color:"red",fontWeight:"bold"}});var Xe=function(e){for(var t=Ve(),n=[],a=Vt.id.startsWith(e.matchInfo.host),r=function(r){var i="",o=!1;r in e.matchInfo.players&&(i=e.matchInfo.players[r].name,o=Vt.id.startsWith(e.matchInfo.players[r].id)),n.push(Object(c.jsx)(Ee.a,{children:Object(c.jsxs)(Ae.a,{className:t.tableCell,children:[r in e.matchInfo.players&&e.matchInfo.host==e.matchInfo.players[r].id?Object(c.jsx)(Me.a,{title:"This player is the host. They have the ability to start the game.",children:Object(c.jsx)(He.a,{fontSize:"inherit"})}):null,o?Object(c.jsx)("span",{className:t.you,children:i}):i,r in e.matchInfo.players&&a&&!e.matchInfo.starting&&!o?Object(c.jsxs)("span",{children:[Object(c.jsx)(Me.a,{title:"Kick - remove this player from this lobby.",children:Object(c.jsx)(V.a,{size:"small",onClick:function(){return Vt.emit("kick",e.matchInfo.players[r].id)},children:Object(c.jsx)(P.a,{fontSize:"inherit"})})}),e.matchInfo.players[r].bot?null:Object(c.jsx)(Me.a,{title:"Promote - transfer your host privileges to this player.",onClick:function(){return Vt.emit("promote",e.matchInfo.players[r].id)},children:Object(c.jsx)(V.a,{size:"small",children:Object(c.jsx)(qe.a,{fontSize:"inherit"})})})]}):null]})},r))},i=0;i<e.matchInfo.maxPlayers;i++)r(i);e.matchInfo.starting&&new Audio("/countdown/".concat(e.matchInfo.startTimer,".mp3")).play();var s="Copy a link others can use to join this lobby to your clipboard.",l=o.a.useState(s),d=Object(ee.a)(l,2),m=d[0],j=d[1];return Object(c.jsxs)("div",{children:[Object(c.jsx)(V.a,{onClick:function(){return window.location.reload()},children:Object(c.jsx)(De.a,{})}),Object(c.jsxs)("div",{className:t.root,children:[Object(c.jsx)(F.a,{variant:"overline",display:"block",gutterBottom:!0,children:"Room code"}),Object(c.jsxs)(F.a,{variant:"h3",gutterBottom:!0,children:[Object(c.jsx)("span",{className:t.privacyIcon,children:e.matchInfo.public?Object(c.jsx)(Me.a,{title:"This is a public match. Anyone can join this match from the 'Find Match' button on the homepage.",children:Object(c.jsx)(be.a,{})}):Object(c.jsx)(Me.a,{title:"This is a private match. Only people with the room code can join.",children:Object(c.jsx)(pe.a,{})})}),e.matchInfo.code,Object(c.jsx)(Me.a,{title:m,children:Object(c.jsx)(V.a,{onClick:function(){_e()("".concat(window.location.protocol,"//").concat(window.location.host,"?").concat(e.matchInfo.code)),j("Copied to clipboard!"),setTimeout((function(){j(s)}),3e3)},children:Object(c.jsx)(Ue.a,{})})})]}),e.matchInfo.starting?Object(c.jsxs)(F.a,{variant:"h4",children:["Starting in ",e.matchInfo.startTimer,"..."]}):Object(c.jsx)(Me.a,{title:a?"Begin a timer to start the match. No more players will be able to join.":"Only the host can start the match.",children:Object(c.jsx)("span",{children:Object(c.jsx)(C.a,{color:a?"primary":"default",size:"large",onClick:function(){return Vt.emit("startMatch")},disabled:!a,children:"Start Match"})})}),Object(c.jsx)(Se.a,{component:Le.a,children:Object(c.jsxs)(We.a,{children:[Object(c.jsx)(ze.a,{children:Object(c.jsx)(Ee.a,{className:t.head,children:Object(c.jsxs)(Ae.a,{className:t.tableCell,children:["Players: ",e.matchInfo.players.length,"/",e.matchInfo.maxPlayers,function(){var e=o.a.useState(null),t=Object(ee.a)(e,2),n=t[0],r=t[1],i=Boolean(n);return Object(c.jsx)("span",{children:a?Object(c.jsxs)("span",{children:[Object(c.jsx)(Me.a,{title:"Add bot",children:Object(c.jsx)(V.a,{size:"small",onClick:function(e){r(e.currentTarget)},children:"\ud83e\udd16"})}),Object(c.jsx)(Ge.a,{open:i,anchorEl:n,onClose:function(){r(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(c.jsx)(se.a,{variant:"text",color:"default","aria-label":"text primary button group",children:["Easy","Medium","Hard"].map((function(e,t){return Object(c.jsx)(C.a,{onClick:function(){return Vt.emit("bot",t)},children:e})}))})})]}):null})}()]})})}),Object(c.jsx)(Re.a,{children:n})]})})]})]})},Qe=n(54),Ze=(n(183),Object(J.a)({gameInfo:{display:"flex",width:"100%",marginBottom:20,margin:"auto",alignItems:"center",justifyContent:"space-between",position:"sticky",top:0,backgroundColor:"black",borderBottom:"1px solid #ffffff1f",zIndex:100,"& div":{flexGrow:1}},gameInfoTitle:{textAlign:"center"},gameInfoContent:{display:"flex",alignItems:"end",justifyContent:"center"},title:{textAlign:"center"},colourIndicator:{height:49},playerArea:{paddingTop:8,paddingBottom:8,marginBottom:16,textAlign:"center",border:"1px solid #ffffff1f",borderRadius:10},selfGameImage:{width:125},otherGameImage:{width:100},playingGamesContainer:{},playingGames:{display:"flex",maxWidth:600,margin:"auto",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},otherGamesContainer:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},otherGames:{display:"flex",maxWidth:600,alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},vsMe:{color:"red"}}));function $e(e){var t=Ze(),n=Object.keys(e.game.players).find((function(t){return e.playerId.startsWith(e.game.players[t])})),a=e.players.find((function(t){return t.id.startsWith(e.game.players["a"==n?"b":"a"])}));return Object(c.jsxs)("div",{children:[Object(c.jsx)("img",{"data-playercolour":e.playerColour,className:"".concat(e.self?"self-game ":"").concat(e.self?t.selfGameImage:t.otherGameImage," ").concat(e.self&&1==e.games.length&&"b"==e.playerColour?"game-b":"game-".concat(n)," game").concat(e.game.id)}),Object(c.jsxs)(F.a,{variant:"caption",display:"block",children:["Game ",e.game.name," vs ",e.myId.startsWith(a.id)?Object(c.jsx)("span",{className:t.vsMe,children:a.name}):a.name]})]})}function et(e){return Object(c.jsx)("svg",{height:e.size,width:e.size,children:Object(c.jsx)("circle",{id:"playerTurnIndicator-".concat(e.player),cx:e.size/2,cy:e.size/2,r:e.size/2,fill:"red"})})}function tt(e){var t=Ze(),n=e.self?t.playingGames:t.otherGames;return Object(c.jsxs)("div",{className:t.playerArea,children:[e.self?Object(c.jsxs)("div",{children:[Object(c.jsxs)(F.a,{variant:"h4",children:[e.player.name," ",Object(c.jsx)(et,{size:23,player:e.player.id.slice(0,6)})]}),Object(c.jsx)(H.a,{})]}):Object(c.jsxs)(F.a,{variant:"h6",gutterBottom:!0,children:[e.player.name," ",Object(c.jsx)(et,{size:14,player:e.player.id})]}),Object(c.jsxs)("div",{className:e.self?t.playingGamesContainer:t.otherGamesContainer,children:[Object(c.jsxs)("div",{className:n,children:[e.self?Object(c.jsx)("img",{className:"".concat(t.colourIndicator," colour-indicator-a"),src:"/a.png"}):null,e.games.filter((function(t){return e.player.id.startsWith(t.players.a)})).map((function(t){return Object(c.jsx)($e,{self:e.self,game:t,games:e.games,players:e.players,playerColour:"a",playerId:e.player.id,myId:e.myId})})),e.self?null:Object(c.jsx)("img",{className:"".concat(t.colourIndicator," colour-indicator-a"),src:"/a.png"})]}),e.self?Object(c.jsx)("div",{id:"controller",className:t.controls}):null,Object(c.jsxs)("div",{className:n,children:[Object(c.jsx)("img",{className:"".concat(t.colourIndicator," colour-indicator-b"),src:"/b.png"}),e.games.filter((function(t){return e.player.id.startsWith(t.players.b)})).map((function(t){return Object(c.jsx)($e,{self:e.self,game:t,games:e.games,players:e.players,playerColour:"b",playerId:e.player.id,myId:e.myId})}))]})]})]})}var nt=function(e){var t=Ze(),n=e.players.find((function(t){return e.myId.startsWith(t.id)}));return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:t.gameInfo,children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:t.gameInfoTitle,children:Object(c.jsx)(F.a,{variant:"subtitle1",children:"Ongoing games"})}),Object(c.jsxs)("div",{className:t.gameInfoContent,children:[Object(c.jsx)(F.a,{variant:"h3",children:Object(c.jsx)("span",{id:"gamesLeft",children:"0"})}),Object(c.jsxs)(F.a,{variant:"h5",children:["/",Object(c.jsx)("span",{id:"maxGames",children:"0"})]})]})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:t.gameInfoTitle,children:Object(c.jsx)(F.a,{variant:"subtitle1",children:"Turn time left"})}),Object(c.jsx)("div",{className:t.gameInfoContent,children:Object(c.jsx)(F.a,{variant:"h3",children:Object(c.jsx)("span",{id:"turnTime",children:"0"})})})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:t.gameInfoTitle,children:Object(c.jsx)(F.a,{variant:"subtitle1",children:"Turn"})}),Object(c.jsx)("div",{className:t.gameInfoContent,children:Object(c.jsxs)(F.a,{variant:"h3",children:[Object(c.jsx)("img",{height:"35",id:"turnIndicator"}),Object(c.jsx)("span",{id:"turnNumber",children:"0"})]})})]})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)(tt,{player:n,players:e.players,games:e.games,self:!0,myId:e.myId}),e.players.filter((function(t){return!e.myId.startsWith(t.id)})).map((function(t){return Object(c.jsx)(tt,{player:t,players:e.players,games:e.games,self:!1,myId:e.myId})}))]})]})},at=n(126),rt=n.n(at),ct=Object(J.a)({root:{textAlign:"center"},tableCell:{textAlign:"center"},gamesContainer:{display:"flex",flexWrap:"wrap",justifyContent:"center","& div":{marginLeft:25,marginRight:25}},gameImage:{width:150},counterImage:{height:10},you:{color:"red"},otherPlayer:{}});var it=function(e){for(var t=ct(),n=function(n){return e.myId.startsWith(n.id)?t.you:t.otherPlayer},a=0,r=1;r<e.results.length&&e.results[r].score==e.results[0].score;r++)a=r;return new Audio("/endMatch.mp3").play(),Object(c.jsx)("div",{children:Object(c.jsxs)("div",{className:t.root,children:[Object(c.jsx)(V.a,{onClick:function(){return window.location.reload()},children:Object(c.jsx)(rt.a,{})}),Object(c.jsxs)(F.a,{variant:"h2",children:["Winner",0==a?"":"s",":"]}),Object(c.jsx)(F.a,{variant:"h4",gutterBottom:!0,children:e.results.slice(0,a+1).map((function(e){return e.name})).join(", ")}),Object(c.jsx)(Se.a,{component:Le.a,children:Object(c.jsx)(We.a,{children:Object(c.jsx)(Re.a,{children:e.results.map((function(n){return Object(c.jsx)(Ee.a,{children:Object(c.jsxs)(Ae.a,{className:t.tableCell,children:[n.placement,". ",e.myId.startsWith(n.id)?Object(c.jsx)("span",{className:t.you,children:n.name}):n.name," with a score of ",n.score,"."]})})}))})})}),Object(c.jsx)(F.a,{variant:"h3",children:"Games"}),Object(c.jsx)("div",{className:t.gamesContainer,children:e.games.map((function(e){return Object(c.jsxs)("div",{children:[Object(c.jsx)("img",{src:e.src,className:t.gameImage}),Object(c.jsxs)(F.a,{variant:"caption",display:"block",children:["Game ",e.name,Object(c.jsx)("br",{}),Object(c.jsx)("span",{className:n(e.players.a),children:e.players.a.name})," ",Object(c.jsx)("img",{className:t.counterImage,src:"/a.png"})," vs ",Object(c.jsx)("img",{className:t.counterImage,src:"/b.png"})," ",Object(c.jsx)("span",{className:n(e.players.b),children:e.players.b.name}),Object(c.jsx)("br",{}),0==e.outcome?"Draw":Object(c.jsxs)("span",{children:["Winner: ",Object(c.jsx)("img",{className:t.counterImage,src:"/".concat(e.outcome,".png")})]})]})]})}))})]})})};for(var ot={a:new Image,b:new Image,hover:{},outcomeOverlay:{}},st=0,lt=["a","b"];st<lt.length;st++){var dt=lt[st],mt="/".concat(dt,".png");ot[dt].src=mt,ot.hover[dt]=new Image,ot.hover[dt].src="/hover_".concat(dt,".png")}for(var jt=0,ut=["win","loss","draw","end"];jt<ut.length;jt++){var ht=ut[jt],bt=new Image;bt.src="/outcome/".concat(ht,".png"),ot.outcomeOverlay[ht]=bt}var ft=ot,pt=100,gt=document.createElement("canvas");gt.width=732,gt.height=108;var xt=gt.getContext("2d"),Ot=null,yt="a";function vt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;xt.clearRect(0,0,gt.width,gt.height),xt.fillStyle="white";for(var t=0;t<8;t++)xt.fillRect(104*t,0,4,gt.height);for(var n=0;n<2;n++)xt.fillRect(0,104*n,gt.width,4);if(null!=e){e.type.startsWith("touch")&&(e=e.changedTouches[0]);var a=e.target.getBoundingClientRect(),r=(e.clientX-a.left-4)*(gt.width/a.width),c=(e.clientY-a.top-4)*(gt.height/a.height);if(r<0||c<0)return;if(c>=pt)return;if(r%104>=pt)return;var i=Math.floor(r/104);Ot!=i&&(Ot=i,Vt.emit("hover",Ot))}if(null!=Ot){var o=ft[yt];o.complete&&xt.drawImage(o,4+104*Ot,4,pt,pt)}}function It(){Vt.emit("move",yt,Ot),Ot=null,Vt.emit("hover",Ot),vt()}vt(),gt.addEventListener("mousemove",vt),gt.addEventListener("touchstart",vt),gt.addEventListener("touchmove",vt),gt.addEventListener("touchend",It),gt.addEventListener("mousedown",It);var wt,Ct,Nt,kt=50,Bt="123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",Tt=new Audio("/place.mp3"),Et=new Audio("/otherPlace.mp3"),At=new Audio("/endGame.mp3"),Mt=new Audio("/startTurn.mp3"),St=[],Lt=[],Wt=0,zt="a",Gt=Date.now(),Rt=document.createElement("canvas");Rt.width=382,Rt.height=378;var Pt=Rt.getContext("2d");function Dt(){var e=(Gt-Date.now())/1e3;e<0&&(e=0),document.getElementById("turnTime").innerHTML=e.toFixed(2)}function Ft(e){document.getElementById("turnNumber").innerHTML=++Wt,zt=e,Gt=Date.now()+wt.turnTime;for(var t=0,n=[].concat(Object(oe.a)(document.getElementsByClassName("game-".concat("a"==zt?"b":"a"))),Object(oe.a)(document.getElementsByClassName("colour-indicator-".concat("a"==zt?"b":"a"))));t<n.length;t++){n[t].classList.add("inactive-game")}for(var a=0,r=[].concat(Object(oe.a)(document.getElementsByClassName("game-".concat(zt))),Object(oe.a)(document.getElementsByClassName("colour-indicator-".concat(zt))));a<r.length;a++){r[a].classList.remove("inactive-game")}setTimeout((function(){for(var e=0,t=[].concat(Object(oe.a)(document.getElementsByClassName("game-".concat("a"==zt?"b":"a"))),Object(oe.a)(document.getElementsByClassName("colour-indicator-".concat("a"==zt?"b":"a"))));e<t.length;e++){t[e].classList.add("inactive-game")}for(var n=0,a=[].concat(Object(oe.a)(document.getElementsByClassName("game-".concat(zt))),Object(oe.a)(document.getElementsByClassName("colour-indicator-".concat(zt))));n<a.length;n++){a[n].classList.remove("inactive-game")}}),50);var c,i=Object(Qe.a)(St);try{for(i.s();!(c=i.n()).done;){c.value.hover=null}}catch(o){i.e(o)}finally{i.f()}document.getElementById("turnIndicator").src="/".concat(zt,".png"),function(e){yt=e,Ot=null,vt()}(zt),Wt>1&&Mt.play()}function Ht(e,t,n){e.complete&&Pt.drawImage(e,54*Number(t)+4,54*(Number(n)+1),kt,kt)}function Jt(e,t,n,a){return null!==e&&e===t&&e===n&&e===a}function qt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Pt.clearRect(0,0,Rt.width,Rt.height),Pt.fillStyle="white";for(var a=0;a<=6;a++)Pt.fillRect(0,kt+54*a,Rt.width,4);for(var r=0;r<=7;r++)Pt.fillRect(54*r,kt,4,Rt.height-kt);for(var c in e.state)for(var i in e.state[c]){var o=e.state[c][i];null!=o&&Ht(ft[o],i,c)}if(null!==e.hover){Ht(ft[zt],e.hover,-1);for(var s=null,l=0;l<6;l++)if(null!=e.state[l][e.hover]){s=l-1;break}-1==s&&(s=!1),null==s&&(s=5),!1!==s&&(ft.hover[zt].complete&&(Pt.globalAlpha=.15,Pt.drawImage(ft.hover[zt],54*Number(e.hover)+4,54,kt,54*(Number(s)+1)-4)),Pt.globalAlpha=.5,Ht(ft[zt],e.hover,s),Pt.globalAlpha=1)}if(null!=t&&t.complete){if(!n){for(var d,m,j=0;j<3;j++)for(var u=0;u<7;u++)Jt(e.state[j][u],e.state[j+1][u],e.state[j+2][u],e.state[j+3][u])&&(d=e.state[j][u],m=[j,u,j+1,u,j+2,u,j+3,u]);for(var h=0;h<6;h++)for(var b=0;b<4;b++)Jt(e.state[h][b],e.state[h][b+1],e.state[h][b+2],e.state[h][b+3])&&(d=e.state[h][b],m=[h,b,h,b+1,h,b+2,h,b+3]);for(var f=0;f<3;f++)for(var p=0;p<4;p++)Jt(e.state[f][p],e.state[f+1][p+1],e.state[f+2][p+2],e.state[f+3][p+3])&&(d=e.state[f][p],m=[f,p,f+1,p+1,f+2,p+2,f+3,p+3]);for(var g=3;g<6;g++)for(var x=0;x<4;x++)Jt(e.state[g][x],e.state[g-1][x+1],e.state[g-2][x+2],e.state[g-3][x+3])&&(d=e.state[g][x],m=[g,x,g-1,x+1,g-2,x+2,g-3,x+3]);Pt.fillStyle={a:"#f58600af",b:"#03ffffaf"}[d];for(var O=0;O<4;O++)Pt.fillRect(54*Number(m[2*O+1])+4,54*(Number(m[2*O])+1),kt,kt)}Pt.globalAlpha=.75,Pt.drawImage(t,0,0,Rt.width,Rt.height),Pt.globalAlpha=1}return Rt.toDataURL()}function Kt(e){var t,n=qt(St[e]),a=Object(Qe.a)(document.getElementsByClassName("game".concat(e)));try{for(a.s();!(t=a.n()).done;){t.value.src=n}}catch(r){a.e(r)}finally{a.f()}}var Ut=u()(h,{transports:["websocket"]}),Yt=!1;function _t(e){setTimeout((function(){Ut.disconnected&&(l.a.render(Object(c.jsxs)(m.a,{theme:r,children:[Object(c.jsx)(d.a,{}),Object(c.jsx)(D,{error:e.toString()})]}),document.getElementById("root")),Ut.disconnect())}),1e4)}l.a.render(Object(c.jsxs)(m.a,{theme:r,children:[Object(c.jsx)(d.a,{}),Object(c.jsx)(G,{})]}),document.getElementById("root")),Ut.on("connect",(function(){Yt||(Yt=!0,l.a.render(Object(c.jsxs)(m.a,{theme:r,children:[Object(c.jsx)(d.a,{}),Object(c.jsx)(Te,{})]}),document.getElementById("root")))})),Ut.on("connect_error",_t),Ut.on("connect_timeout",_t),Ut.on("disconnect",_t),Ut.on("err",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown error",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Error:";W({title:t,description:e})})),Ut.on("kicked",(function(e){W({required:!0,title:"Kicked!",description:"".concat(e," kicked you from the lobby."),buttonText:"Back Home",buttonAction:function(){return window.location.reload()}})})),Ut.on("joinMatch",(function(){})),Ut.on("matchUpdate",(function(e){e.started||l.a.render(Object(c.jsxs)(m.a,{theme:r,children:[Object(c.jsx)(d.a,{}),Object(c.jsx)(Xe,{matchInfo:e})]}),document.getElementById("root"))})),Ut.on("matchStart",(function(e){return function(e,t){for(var n in Ct=t,wt=e,Wt=0,e.games){for(var a=e.games[n],i=[],o=0;o<6;o++){for(var s=[],j=0;j<7;j++)s.push(null);i.push(s)}St.push({id:n,name:n+1>Bt.length?"".concat(Bt[~~(n/Bt.length)]).concat(Bt[n%Bt.length]):Bt[n],players:a.players,state:i})}Nt=St.length,l.a.render(Object(c.jsxs)(m.a,{theme:r,children:[Object(c.jsx)(d.a,{}),Object(c.jsx)(nt,{players:e.players,games:St,myId:Ct})]}),document.getElementById("root"),(function(){for(var e in document.getElementById("controller").appendChild(gt),gt.style.touchAction="none",document.getElementById("maxGames").innerHTML=Nt,document.getElementById("gamesLeft").innerHTML=Nt,St)Kt(e);Lt.timer=setInterval(Dt,1e3/24),new Audio("/startMatch.mp3").play()}))}(e,Ut.id)})),Ut.on("turnSwitch",(function(e){return Ft(e)})),Ut.on("hover",(function(e,t,n){return function(e,t,n){t==zt&&(St[e].hover=n),Kt(e)}(e,t,n)})),Ut.on("move",(function(e,t,n,a){return function(e,t,n,a){var r=St[e];r.state[n][a]=t,r.hover=null,Kt(e),Ct.startsWith(r.players[t])||Et.play()}(e,t,n,a)})),Ut.on("takenTurn",(function(e){return function(e){if(Tt.play(),e==zt){var t,n=Object(Qe.a)(document.querySelectorAll(".self-game.game-".concat(e)));try{for(n.s();!(t=n.n()).done;)t.value.classList.add("inactive-game")}catch(a){n.e(a)}finally{n.f()}}}(e)})),Ut.on("outcomeDecided",(function(e,t){return function(e,t){document.getElementById("gamesLeft").innerHTML=--Nt,St[e].outcome=t;var n,a=Object(Qe.a)(document.getElementsByClassName("game".concat(e)));try{for(a.s();!(n=a.n()).done;){var r=n.value;r.classList.add("game-outcome-decided");var c=void 0;0==t?c="draw":t==r.getAttribute("data-playercolour")?c="win":c="loss",r.src=qt(St[e],ft.outcomeOverlay[c],0==t)}}catch(i){a.e(i)}finally{a.f()}At.play()}(e,t)})),Ut.on("endMatch",(function(e){return function(e){for(var t in Lt)clearInterval(Lt[t]),delete Lt[t];var n,a=Object(Qe.a)(St);try{var i=function(){var e=n.value;e.src=qt(e,ft.outcomeOverlay.end,0==e.outcome);var t=function(t){e.players[t]=wt.players.find((function(n){return n.id==e.players[t]}))};for(var a in e.players)t(a)};for(a.s();!(n=a.n()).done;)i()}catch(o){a.e(o)}finally{a.f()}St.sort((function(e,t){return Bt.indexOf(e.name)-Bt.indexOf(t.name)})),l.a.render(Object(c.jsxs)(m.a,{theme:r,children:[Object(c.jsx)(d.a,{}),Object(c.jsx)(it,{myId:Ct,results:e,games:St})]}),document.getElementById("root")),wt=null,St=[],Lt=[]}(e)})),Ut.on("ts",(function(e,t){return function(e,t){document.getElementById("playerTurnIndicator-".concat(e)).setAttribute("fill",t?"green":"red")}(e,t)}));var Vt=Ut}},[[184,1,2]]]);
//# sourceMappingURL=main.0c9a9855.chunk.js.map