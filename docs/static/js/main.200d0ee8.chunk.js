(this.webpackJsonp8connect4=this.webpackJsonp8connect4||[]).push([[0],{109:function(e,t,n){},115:function(e){e.exports=JSON.parse('"wss://8c4server.flynna.uk"')},138:function(e,t,n){},179:function(e,t,n){},180:function(e,t,n){"use strict";n.r(t);n(137),n(138);var a=n(124),r=Object(a.a)({palette:{type:"dark",background:{default:"#050505"},primary:{main:"#d49a3d"}},overrides:{MuiButton:{textPrimary:{background:"linear-gradient(45deg, #ff7b00 0%, #ff00ff 100%)",borderRadius:3,border:0,color:"white !important",padding:"0 30px",boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)"},textSecondary:{background:"linear-gradient(45deg, rgb(255,37,180) 30%, rgb(198,19,19) 90%)",borderRadius:3,border:0,color:"white !important",padding:"0 30px",boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)"}}}}),c=n(2),i=n(0),s=n.n(i),o=n(11),l=n.n(o),d=n(226),m=n(225),j=n(114),u=n.n(j),h=n(115),b=n(23),p=n.n(b),f=n(53),g=n(50),x=n(65),O=n(66),v=n(36),y=n(78),I=n(77),w=n(5),C=n(181),N=n(247),k=n(224),T=n(222),B=n(223),A=n(221),E=function(e){Object(y.a)(n,e);var t=Object(I.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state={open:!1},a.handleOpen=a.handleOpen.bind(Object(v.a)(a)),a.handleClose=a.handleClose.bind(Object(v.a)(a)),a}return Object(O.a)(n,[{key:"handleOpen",value:function(){this.setState({open:!0})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){var e=this.props.classes;return Object(c.jsx)("div",{children:Object(c.jsxs)(N.a,{open:this.state.open,onClose:this.handleClose,disablePortal:!0,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",disableBackdropClick:this.props.required,disableEscapeKeyDown:this.props.required,children:[Object(c.jsx)(A.a,{id:"alert-dialog-title",children:this.props.title}),Object(c.jsxs)(T.a,{dividers:!0,children:[Object(c.jsx)(B.a,{className:e.text,id:"alert-dialog-description",children:this.props.description}),this.props.children]}),Object(c.jsxs)(k.a,{children:[this.props.required?null:Object(c.jsx)(C.a,{onClick:this.handleClose,color:"secondary",children:"Close"}),this.props.buttonText?Object(c.jsx)(C.a,{onClick:this.props.buttonAction,color:"primary",children:this.props.buttonText}):null]})]})})}}]),n}(s.a.Component),L=Object(w.a)((function(e){return{text:{margin:0}}}))(E);function S(){return M.apply(this,arguments)}function M(){return(M=Object(g.a)(p.a.mark((function e(){var t,n,a=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:null,e.abrupt("return",new Promise(function(){var e=Object(g.a)(p.a.mark((function e(a){var i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.assign({title:"Dialog title",required:!1},t),l.a.render(Object(c.jsxs)(m.a,{theme:r,children:[Object(c.jsx)(d.a,{}),Object(c.jsx)(L,Object(f.a)(Object(f.a)({},t),{},{ref:function(e){return i=e},children:n}))]}),document.getElementById("dialog")),i?(i.handleOpen(),a(i)):setTimeout(Object(g.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,S(t,n);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)}))),100);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W=S,G=(n(109),n(227));var R=function(){return Object(c.jsxs)("div",{className:"centred",children:[Object(c.jsx)(G.a,{}),Object(c.jsx)("h3",{children:"Attempting to connect to the 8connect4 server..."})]})},P=n(117),D=n.n(P);var F=function(e){return Object(c.jsxs)("div",{className:"centred",children:[Object(c.jsx)(D.a,{}),Object(c.jsx)("h3",{children:"Failed to connect to the 8connect4 server."}),e.error?Object(c.jsxs)("p",{children:['Error: "',e.error,'"']}):null,Object(c.jsx)("h4",{children:"Are you offline? If not, the 8connect4 server might be down."}),Object(c.jsx)(C.a,{size:"large",color:"primary",onClick:function(){return window.location.reload(!1)},children:"Retry"})]})},z=n(79),H=n(234),q=n(231),J=n(4),K=n(249),U=n(229),Y=n(228),_=n(230),V=n(183),X=n(118),Q=n.n(X),Z=function(e){Object(y.a)(n,e);var t=Object(I.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state={code:""},a.changeInput=a.changeInput.bind(Object(v.a)(a)),a.tryCode=a.tryCode.bind(Object(v.a)(a)),a}return Object(O.a)(n,[{key:"changeInput",value:function(e){var t=e.target.value;t=t.replace(" ",""),this.setState({code:t})}},{key:"tryCode",value:function(){Pt.emit("joinMatch",this.state.code)}},{key:"render",value:function(){var e=this,t=this.props.classes;return Object(c.jsxs)("div",{children:[Object(c.jsx)("label",Object(f.a)(Object(f.a)({},{}),{},{htmlFor:"roomCodeInput",children:"Or, join by code:"})),Object(c.jsx)("br",{}),Object(c.jsxs)(K.a,{className:Object(J.a)(t.margin,t.textField),variant:"filled",children:[Object(c.jsx)(Y.a,{htmlFor:"roomCodeInput",children:"Room code"}),Object(c.jsx)(U.a,{id:"roomCodeInput",type:"text",value:this.state.code,onChange:this.changeInput,autoComplete:"off",inputProps:{className:t.textInput,maxLength:6,onKeyDown:function(t){"Enter"==t.key&&e.tryCode()}},endAdornment:Object(c.jsx)(_.a,{position:"end",children:Object(c.jsx)(V.a,{"aria-label":"Join",onClick:this.tryCode,edge:"end",children:Object(c.jsx)(Q.a,{})})})})]})]})}}]),n}(s.a.Component),$=Object(w.a)((function(e){return{margin:{margin:e.spacing(1),marginBottom:0},joinLabel:{display:"inline-block",marginTop:22,marginRight:4},textField:{width:"18ch"},textInput:{textTransform:"uppercase"}}}))(Z),ee=n(44),te=n(244),ne=n(232),ae=n(119),re=n.n(ae),ce=Object(q.a)((function(e){return{margin:{margin:e.spacing(1)},input:{width:170},label:{textAlign:"center"}}}));var ie=function(){var e=ce(),t=s.a.useState(localStorage.name?localStorage.name:""),n=Object(ee.a)(t,2),a=n[0],r=n[1],i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t||r(e),localStorage.name=e,Pt.emit("changeName",e)};return i(a,!0),Object(c.jsx)("div",{className:e.margin,children:Object(c.jsxs)(ne.a,{container:!0,justify:"center",spacing:1,alignItems:"flex-end",children:[Object(c.jsx)(ne.a,{item:!0,children:Object(c.jsx)(re.a,{})}),Object(c.jsx)(ne.a,{item:!0,children:Object(c.jsx)(te.a,{id:"nameInput",label:"Your name",value:a,onChange:function(e){return i(e.target.value)},autoComplete:"off",inputProps:{className:e.input,maxLength:12,onKeyDown:function(e){"Enter"==e.key&&document.activeElement.blur()}},InputLabelProps:{className:e.label}})})]})})},se=n(43),oe=n(182),le=n(235),de=n(236),me=n(250),je=n(237),ue=n(246),he=n(75),be=n.n(he),pe=n(73),fe=n.n(pe),ge=[1,100],xe=Object(q.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:300},selectEmpty:{marginTop:e.spacing(2)}}})),Oe=[1,2,3,5,8,12,15,20,30,45,60,120],ve=function(e){return"".concat(Oe[e],"s")},ye={public:!1,players:9,turnTime:8,runDownTimer:!0};function Ie(){var e=xe(),t=s.a.useState(ye.public),n=Object(ee.a)(t,2),a=n[0],r=n[1],i=s.a.useState(ye.players),o=Object(ee.a)(i,2),l=o[0],d=o[1],m=function(e){ye.players+=e,ye.players<ge[0]&&(ye.players=ge[0]),ye.players>ge[1]&&(ye.players=ge[1]),d(ye.players)},j=s.a.useState(Oe.indexOf(ye.turnTime)),u=Object(ee.a)(j,2),h=u[0],b=u[1],p=s.a.useState(ye.runDownTimer),f=Object(ee.a)(p,2),g=f[0],x=f[1];return Object(c.jsxs)("div",{children:[Object(c.jsx)(H.a,{style:{marginTop:16,marginBottom:8}}),Object(c.jsx)(oe.a,{children:"Privacy"}),Object(c.jsx)(z.a,{component:"div",children:Object(c.jsxs)(ne.a,{component:"label",container:!0,alignItems:"center",spacing:1,children:[Object(c.jsx)(ne.a,{item:!0,children:Object(c.jsx)(fe.a,{})}),Object(c.jsx)(ne.a,{item:!0,children:Object(c.jsx)(le.a,{color:"primary",checked:a,onChange:function(e){ye.public=!a,r(!a)}})}),Object(c.jsx)(ne.a,{item:!0,children:Object(c.jsx)(be.a,{})})]})}),Object(c.jsx)(H.a,{}),Object(c.jsxs)(K.a,{className:e.formControl,children:[Object(c.jsx)(oe.a,{style:{marginBottom:5},children:"Max players"}),Object(c.jsxs)(de.a,{size:"small",children:[Object(c.jsx)(C.a,{onClick:function(){return m(-1/0)},children:"<<"}),Object(c.jsx)(C.a,{onClick:function(){return m(-10)},children:"- -"}),Object(c.jsx)(C.a,{onClick:function(){return m(-1)},children:"-"}),Object(c.jsx)(C.a,{disabled:!0,children:l}),Object(c.jsx)(C.a,{onClick:function(){return m(1)},children:"+"}),Object(c.jsx)(C.a,{onClick:function(){return m(10)},children:"++"}),Object(c.jsx)(C.a,{onClick:function(){return m(1/0)},children:">>"})]})]}),Object(c.jsx)(H.a,{style:{marginBottom:8}}),Object(c.jsx)(oe.a,{children:"Turn time"}),Object(c.jsx)(me.a,{value:h,onChange:function(e,t){ye.turnTime=Oe[t],b(t)},step:null,marks:Object(se.a)(Oe.keys()).map((function(e){return{value:e,label:String(Oe[e])}})),min:0,max:Oe.length-1,getAriaValueText:ve,valueLabelFormat:ve,valueLabelDisplay:"auto"}),Object(c.jsx)(H.a,{style:{marginBottom:8}}),Object(c.jsx)(je.a,{control:Object(c.jsx)(ue.a,{color:"primary",checked:g,onChange:function(e){ye.runDownTimer=!g,x(!g)}}),label:"Always run down turn timer?",labelPlacement:"start"})]})}function we(){return(we=Object(g.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W({title:"Create Match",description:"Match options:",buttonText:"Create",buttonAction:function(){t.handleClose(),Pt.emit("createMatch",ye)}},Object(c.jsx)(Ie,{}));case 2:t=e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ce=function(){return we.apply(this,arguments)},Ne=Object(q.a)({logoImage:{display:"block",textAlign:"center",margin:"auto",maxWidth:350},controls:{textAlign:"center",border:"1px solid #ffffff1f",borderRadius:10}});var ke=function(){var e=Ne();return Object(c.jsxs)("div",{children:[Object(c.jsx)(z.a,{className:e.title,variant:"h3",gutterBottom:!0,children:Object(c.jsx)("img",{className:e.logoImage,src:"/iconanimated2.png",alt:"8connect4"})}),Object(c.jsx)(z.a,{variant:"body1",gutterBottom:!0,children:"Play 8 games of connect 4 at once."}),Object(c.jsxs)("div",{className:e.controls,children:[Object(c.jsx)(ie,{}),Object(c.jsx)(H.a,{}),Object(c.jsx)("br",{}),Object(c.jsx)(C.a,{size:"large",color:"primary",onClick:function(){return Pt.emit("findMatch")},children:"Find Match"}),Object(c.jsx)("br",{}),Object(c.jsx)(C.a,{size:"small",color:"secondary",onClick:Ce,children:"Create Match"}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsx)($,{})]})]})},Te=n(238),Be=n(239),Ae=n(248),Ee=n(240),Le=n(217),Se=n(241),Me=n(242),We=n(243),Ge=n(122),Re=n.n(Ge),Pe=n(121),De=n.n(Pe),Fe=Object(q.a)({root:{textAlign:"center"},privacyIcon:{marginRight:10},table:{width:400,margin:"auto"},head:{backgroundColor:"black"},tableCell:{textAlign:"center"},you:{color:"red",fontWeight:"bold"}});var ze=function(e){for(var t=Fe(),n=[],a=0;a<e.matchInfo.maxPlayers;a++){var r="",i=!1;a in e.matchInfo.players&&(r=e.matchInfo.players[a].name,i=Pt.id.startsWith(e.matchInfo.players[a].id)),n.push(Object(c.jsx)(Te.a,{children:Object(c.jsxs)(Be.a,{className:t.tableCell,children:[a in e.matchInfo.players&&e.matchInfo.host==e.matchInfo.players[a].id?Object(c.jsx)(Ae.a,{title:"This player is the host. They have the ability to start the game.",children:Object(c.jsx)(De.a,{fontSize:"inherit"})}):null,i?Object(c.jsx)("span",{className:t.you,children:r}):r]})},a))}e.matchInfo.starting&&new Audio("/countdown/".concat(e.matchInfo.startTimer,".mp3")).play();var s=Pt.id.startsWith(e.matchInfo.host);return Object(c.jsxs)("div",{children:[Object(c.jsx)(V.a,{onClick:function(){return window.location.reload()},children:Object(c.jsx)(Re.a,{})}),Object(c.jsxs)("div",{className:t.root,children:[Object(c.jsx)(z.a,{variant:"overline",display:"block",gutterBottom:!0,children:"Room code"}),Object(c.jsxs)(z.a,{variant:"h3",gutterBottom:!0,children:[Object(c.jsx)("span",{className:t.privacyIcon,children:e.matchInfo.public?Object(c.jsx)(Ae.a,{title:"This is a public match. Anyone can join this match from the 'Find Match' button on the homepage.",children:Object(c.jsx)(be.a,{})}):Object(c.jsx)(Ae.a,{title:"This is a private match. Only people with the room code can join.",children:Object(c.jsx)(fe.a,{})})}),e.matchInfo.code]}),e.matchInfo.starting?Object(c.jsxs)(z.a,{variant:"h4",children:["Starting in ",e.matchInfo.startTimer,"..."]}):Object(c.jsx)(Ae.a,{title:s?"Begin a timer to start the match. No more players will be able to join.":"Only the host can start the match.",children:Object(c.jsx)("span",{children:Object(c.jsx)(C.a,{color:s?"primary":"default",size:"large",onClick:function(){return Pt.emit("startMatch")},disabled:!s,children:"Start Match"})})}),Object(c.jsx)(Ee.a,{component:Le.a,children:Object(c.jsxs)(Se.a,{children:[Object(c.jsx)(Me.a,{children:Object(c.jsx)(Te.a,{className:t.head,children:Object(c.jsxs)(Be.a,{className:t.tableCell,children:["Players: ",e.matchInfo.players.length,"/",e.matchInfo.maxPlayers]})})}),Object(c.jsx)(We.a,{children:n})]})})]})]})},He=n(54),qe=(n(179),Object(q.a)({gameInfo:{display:"flex",width:"100%",marginBottom:20,margin:"auto",alignItems:"center",justifyContent:"space-between",position:"sticky",top:0,backgroundColor:"black",borderBottom:"1px solid #ffffff1f",zIndex:100,"& div":{flexGrow:1}},gameInfoTitle:{textAlign:"center"},gameInfoContent:{display:"flex",alignItems:"end",justifyContent:"center"},title:{textAlign:"center"},colourIndicator:{height:49},playerArea:{paddingTop:8,paddingBottom:8,marginBottom:16,textAlign:"center",border:"1px solid #ffffff1f",borderRadius:10},selfGameImage:{width:125},otherGameImage:{width:100},playingGamesContainer:{},playingGames:{display:"flex",maxWidth:600,margin:"auto",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},otherGamesContainer:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},otherGames:{display:"flex",maxWidth:600,alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},vsMe:{color:"red"}}));function Je(e){var t=qe(),n=Object.keys(e.game.players).find((function(t){return e.playerId.startsWith(e.game.players[t])})),a=e.players.find((function(t){return t.id.startsWith(e.game.players["a"==n?"b":"a"])}));return Object(c.jsxs)("div",{children:[Object(c.jsx)("img",{"data-playercolour":e.playerColour,className:"".concat(e.self?"self-game ":"").concat(e.self?t.selfGameImage:t.otherGameImage," ").concat(e.self&&1==e.games.length&&"b"==e.playerColour?"game-b":"game-".concat(n)," game").concat(e.game.id)}),Object(c.jsxs)(z.a,{variant:"caption",display:"block",children:["Game ",e.game.name," vs ",e.myId.startsWith(a.id)?Object(c.jsx)("span",{className:t.vsMe,children:a.name}):a.name]})]})}function Ke(e){var t=qe(),n=e.self?t.playingGames:t.otherGames;return Object(c.jsxs)("div",{className:t.playerArea,children:[e.self?Object(c.jsxs)("div",{children:[Object(c.jsx)(z.a,{variant:"h4",children:e.player.name}),Object(c.jsx)(H.a,{})]}):Object(c.jsx)(z.a,{variant:"h6",gutterBottom:!0,children:e.player.name}),Object(c.jsxs)("div",{className:e.self?t.playingGamesContainer:t.otherGamesContainer,children:[Object(c.jsxs)("div",{className:n,children:[e.self?Object(c.jsx)("img",{className:"".concat(t.colourIndicator," colour-indicator-a"),src:"/a.png"}):null,e.games.filter((function(t){return e.player.id.startsWith(t.players.a)})).map((function(t){return Object(c.jsx)(Je,{self:e.self,game:t,games:e.games,players:e.players,playerColour:"a",playerId:e.player.id,myId:e.myId})})),e.self?null:Object(c.jsx)("img",{className:"".concat(t.colourIndicator," colour-indicator-a"),src:"/a.png"})]}),e.self?Object(c.jsx)("div",{id:"controller",className:t.controls}):null,Object(c.jsxs)("div",{className:n,children:[Object(c.jsx)("img",{className:"".concat(t.colourIndicator," colour-indicator-b"),src:"/b.png"}),e.games.filter((function(t){return e.player.id.startsWith(t.players.b)})).map((function(t){return Object(c.jsx)(Je,{self:e.self,game:t,games:e.games,players:e.players,playerColour:"b",playerId:e.player.id,myId:e.myId})}))]})]})]})}var Ue=function(e){var t=qe(),n=e.players.find((function(t){return e.myId.startsWith(t.id)}));return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:t.gameInfo,children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:t.gameInfoTitle,children:Object(c.jsx)(z.a,{variant:"subtitle1",children:"Ongoing games"})}),Object(c.jsxs)("div",{className:t.gameInfoContent,children:[Object(c.jsx)(z.a,{variant:"h3",children:Object(c.jsx)("span",{id:"gamesLeft",children:"0"})}),Object(c.jsxs)(z.a,{variant:"h5",children:["/",Object(c.jsx)("span",{id:"maxGames",children:"0"})]})]})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:t.gameInfoTitle,children:Object(c.jsx)(z.a,{variant:"subtitle1",children:"Turn time left"})}),Object(c.jsx)("div",{className:t.gameInfoContent,children:Object(c.jsx)(z.a,{variant:"h3",children:Object(c.jsx)("span",{id:"turnTime",children:"0"})})})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:t.gameInfoTitle,children:Object(c.jsx)(z.a,{variant:"subtitle1",children:"Turn"})}),Object(c.jsx)("div",{className:t.gameInfoContent,children:Object(c.jsxs)(z.a,{variant:"h3",children:[Object(c.jsx)("img",{height:"35",id:"turnIndicator"}),Object(c.jsx)("span",{id:"turnNumber",children:"0"})]})})]})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)(Ke,{player:n,players:e.players,games:e.games,self:!0,myId:e.myId}),e.players.filter((function(t){return!e.myId.startsWith(t.id)})).map((function(t){return Object(c.jsx)(Ke,{player:t,players:e.players,games:e.games,self:!1,myId:e.myId})}))]})]})},Ye=n(123),_e=n.n(Ye),Ve=Object(q.a)({root:{textAlign:"center"},tableCell:{textAlign:"center"},gamesContainer:{display:"flex",flexWrap:"wrap",justifyContent:"center","& div":{marginLeft:25,marginRight:25}},gameImage:{width:150},counterImage:{height:10},you:{color:"red"},otherPlayer:{}});var Xe=function(e){for(var t=Ve(),n=function(n){return e.myId.startsWith(n.id)?t.you:t.otherPlayer},a=0,r=1;r<e.results.length&&e.results[r].score==e.results[0].score;r++)a=r;return new Audio("/endMatch.mp3").play(),Object(c.jsx)("div",{children:Object(c.jsxs)("div",{className:t.root,children:[Object(c.jsx)(V.a,{onClick:function(){return window.location.reload()},children:Object(c.jsx)(_e.a,{})}),Object(c.jsxs)(z.a,{variant:"h2",children:["Winner",0==a?"":"s",":"]}),Object(c.jsx)(z.a,{variant:"h4",gutterBottom:!0,children:e.results.slice(0,a+1).map((function(e){return e.name})).join(", ")}),Object(c.jsx)(Ee.a,{component:Le.a,children:Object(c.jsx)(Se.a,{children:Object(c.jsx)(We.a,{children:e.results.map((function(n){return Object(c.jsx)(Te.a,{children:Object(c.jsxs)(Be.a,{className:t.tableCell,children:[n.placement,". ",e.myId.startsWith(n.id)?Object(c.jsx)("span",{className:t.you,children:n.name}):n.name," with a score of ",n.score,"."]})})}))})})}),Object(c.jsx)(z.a,{variant:"h3",children:"Games"}),Object(c.jsx)("div",{className:t.gamesContainer,children:e.games.map((function(e){return Object(c.jsxs)("div",{children:[Object(c.jsx)("img",{src:e.src,className:t.gameImage}),Object(c.jsxs)(z.a,{variant:"caption",display:"block",children:["Game ",e.name,Object(c.jsx)("br",{}),Object(c.jsx)("span",{className:n(e.players.a),children:e.players.a.name})," ",Object(c.jsx)("img",{className:t.counterImage,src:"/a.png"})," vs ",Object(c.jsx)("img",{className:t.counterImage,src:"/b.png"})," ",Object(c.jsx)("span",{className:n(e.players.b),children:e.players.b.name}),Object(c.jsx)("br",{}),0==e.outcome?"Draw":Object(c.jsxs)("span",{children:["Winner: ",Object(c.jsx)("img",{className:t.counterImage,src:"/".concat(e.outcome,".png")})]})]})]})}))})]})})};for(var Qe={a:new Image,b:new Image,hover:{},outcomeOverlay:{}},Ze=0,$e=["a","b"];Ze<$e.length;Ze++){var et=$e[Ze],tt="/".concat(et,".png");Qe[et].src=tt,Qe.hover[et]=new Image,Qe.hover[et].src="/hover_".concat(et,".png")}for(var nt=0,at=["win","loss","draw"];nt<at.length;nt++){var rt=at[nt],ct=new Image;ct.src="/outcome/".concat(rt,".png"),Qe.outcomeOverlay[rt]=ct}var it=Qe,st=100,ot=document.createElement("canvas");ot.width=732,ot.height=108;var lt=ot.getContext("2d"),dt=null,mt="a";function jt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;lt.clearRect(0,0,ot.width,ot.height),lt.fillStyle="white";for(var t=0;t<8;t++)lt.fillRect(104*t,0,4,ot.height);for(var n=0;n<2;n++)lt.fillRect(0,104*n,ot.width,4);if(null!=e){e.type.startsWith("touch")&&(e=e.changedTouches[0]);var a=e.target.getBoundingClientRect(),r=(e.clientX-a.left-4)*(ot.width/a.width),c=(e.clientY-a.top-4)*(ot.height/a.height);if(r<0||c<0)return;if(c>=st)return;if(r%104>=st)return;var i=Math.floor(r/104);dt!=i&&(dt=i,Pt.emit("hover",dt))}if(null!=dt){var s=it[mt];s.complete&&lt.drawImage(s,4+104*dt,4,st,st)}}function ut(){Pt.emit("move",mt,dt),dt=null,Pt.emit("hover",dt),jt()}jt(),ot.addEventListener("mousemove",jt),ot.addEventListener("touchstart",jt),ot.addEventListener("touchmove",jt),ot.addEventListener("touchend",ut),ot.addEventListener("mousedown",ut);var ht,bt,pt,ft=50,gt="123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",xt=new Audio("/place.mp3"),Ot=new Audio("/otherPlace.mp3"),vt=new Audio("/endGame.mp3"),yt=new Audio("/startTurn.mp3"),It=[],wt=[],Ct=0,Nt="a",kt=Date.now(),Tt=document.createElement("canvas");Tt.width=382,Tt.height=378;var Bt=Tt.getContext("2d");function At(){var e=(kt-Date.now())/1e3;e<0&&(e=0),document.getElementById("turnTime").innerHTML=e.toFixed(2)}function Et(e){document.getElementById("turnNumber").innerHTML=++Ct,Nt=e,kt=Date.now()+ht.turnTime;for(var t=0,n=[].concat(Object(se.a)(document.getElementsByClassName("game-".concat("a"==e?"b":"a"))),Object(se.a)(document.getElementsByClassName("colour-indicator-".concat("a"==e?"b":"a"))));t<n.length;t++){n[t].classList.add("inactive-game")}for(var a=0,r=[].concat(Object(se.a)(document.getElementsByClassName("game-".concat(e))),Object(se.a)(document.getElementsByClassName("colour-indicator-".concat(e))));a<r.length;a++){r[a].classList.remove("inactive-game")}var c,i=Object(He.a)(It);try{for(i.s();!(c=i.n()).done;){c.value.hover=null}}catch(s){i.e(s)}finally{i.f()}document.getElementById("turnIndicator").src="/".concat(e,".png"),function(e){mt=e,dt=null,jt()}(e),Ct>1&&yt.play()}function Lt(e,t,n){e.complete&&Bt.drawImage(e,54*Number(t)+4,54*(Number(n)+1),ft,ft)}function St(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Bt.clearRect(0,0,Tt.width,Tt.height),Bt.fillStyle="white";for(var n=0;n<=6;n++)Bt.fillRect(0,ft+54*n,Tt.width,4);for(var a=0;a<=7;a++)Bt.fillRect(54*a,ft,4,Tt.height-ft);for(var r in e.state)for(var c in e.state[r]){var i=e.state[r][c];null!=i&&Lt(it[i],c,r)}if(null!==e.hover){Lt(it[Nt],e.hover,-1);for(var s=null,o=0;o<6;o++)if(null!=e.state[o][e.hover]){s=o-1;break}-1==s&&(s=!1),null==s&&(s=5),!1!==s&&(it.hover[Nt].complete&&(Bt.globalAlpha=.15,Bt.drawImage(it.hover[Nt],54*Number(e.hover)+4,54,ft,54*(Number(s)+1)-4)),Bt.globalAlpha=.5,Lt(it[Nt],e.hover,s),Bt.globalAlpha=1)}return null!=t&&t.complete&&(Bt.globalAlpha=.75,Bt.drawImage(t,0,0,Tt.width,Tt.height),Bt.globalAlpha=1),Tt.toDataURL()}function Mt(e){var t,n=St(It[e]),a=Object(He.a)(document.getElementsByClassName("game".concat(e)));try{for(a.s();!(t=a.n()).done;){t.value.src=n}}catch(r){a.e(r)}finally{a.f()}}var Wt=u()(h),Gt=!1;function Rt(e){l.a.render(Object(c.jsxs)(m.a,{theme:r,children:[Object(c.jsx)(d.a,{}),Object(c.jsx)(F,{error:e.toString()})]}),document.getElementById("root")),Wt.disconnect()}l.a.render(Object(c.jsxs)(m.a,{theme:r,children:[Object(c.jsx)(d.a,{}),Object(c.jsx)(R,{})]}),document.getElementById("root")),Wt.on("connect",(function(){Gt||(Gt=!0,l.a.render(Object(c.jsxs)(m.a,{theme:r,children:[Object(c.jsx)(d.a,{}),Object(c.jsx)(ke,{})]}),document.getElementById("root")))})),Wt.on("connect_error",Rt),Wt.on("connect_timeout",Rt),Wt.on("disconnect",Rt),Wt.on("err",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown error",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Error:";W({title:t,description:e})})),Wt.on("joinMatch",(function(){})),Wt.on("matchUpdate",(function(e){e.started||l.a.render(Object(c.jsxs)(m.a,{theme:r,children:[Object(c.jsx)(d.a,{}),Object(c.jsx)(ze,{matchInfo:e})]}),document.getElementById("root"))})),Wt.on("matchStart",(function(e){return function(e,t){for(var n in bt=t,ht=e,Ct=0,e.games){for(var a=e.games[n],i=[],s=0;s<6;s++){for(var o=[],j=0;j<7;j++)o.push(null);i.push(o)}It.push({id:n,name:n>gt.length?"".concat(gt[~~(n/gt.length)]).concat(gt[n%gt.length]):gt[n],players:a.players,state:i})}pt=It.length,l.a.render(Object(c.jsxs)(m.a,{theme:r,children:[Object(c.jsx)(d.a,{}),Object(c.jsx)(Ue,{players:e.players,games:It,myId:bt})]}),document.getElementById("root"),(function(){for(var e in document.getElementById("controller").appendChild(ot),document.getElementById("maxGames").innerHTML=pt,document.getElementById("gamesLeft").innerHTML=pt,It)Mt(e);wt.timer=setInterval(At,1e3/24),new Audio("/startMatch.mp3").play()}))}(e,Wt.id)})),Wt.on("turnSwitch",(function(e){return Et(e)})),Wt.on("hover",(function(e,t,n){return function(e,t,n){t==Nt&&(It[e].hover=n),Mt(e)}(e,t,n)})),Wt.on("move",(function(e,t,n,a){return function(e,t,n,a){var r=It[e];r.state[n][a]=t,r.hover=null,Mt(e),bt.startsWith(r.players[t])||Ot.play()}(e,t,n,a)})),Wt.on("takenTurn",(function(e){return function(e){if(xt.play(),e==Nt){var t,n=Object(He.a)(document.querySelectorAll(".self-game.game-".concat(e)));try{for(n.s();!(t=n.n()).done;)t.value.classList.add("inactive-game")}catch(a){n.e(a)}finally{n.f()}}}(e)})),Wt.on("outcomeDecided",(function(e,t){return function(e,t){document.getElementById("gamesLeft").innerHTML=--pt,It[e].outcome=t;var n,a=Object(He.a)(document.getElementsByClassName("game".concat(e)));try{for(a.s();!(n=a.n()).done;){var r=n.value;r.classList.add("game-outcome-decided");var c=void 0;0==t?c="draw":t==r.getAttribute("data-playercolour")?c="win":c="loss",r.src=St(It[e],it.outcomeOverlay[c])}}catch(i){a.e(i)}finally{a.f()}vt.play()}(e,t)})),Wt.on("endMatch",(function(e){return function(e){for(var t in wt)clearInterval(wt[t]),delete wt[t];var n,a=Object(He.a)(It);try{var i=function(){var e=n.value;e.src=St(e);var t=function(t){e.players[t]=ht.players.find((function(n){return n.id==e.players[t]}))};for(var a in e.players)t(a)};for(a.s();!(n=a.n()).done;)i()}catch(s){a.e(s)}finally{a.f()}It.sort((function(e,t){return gt.indexOf(e.name)-gt.indexOf(t.name)})),l.a.render(Object(c.jsxs)(m.a,{theme:r,children:[Object(c.jsx)(d.a,{}),Object(c.jsx)(Xe,{myId:bt,results:e,games:It})]}),document.getElementById("root")),ht=null,It=[],wt=[]}(e)}));var Pt=Wt}},[[180,1,2]]]);
//# sourceMappingURL=main.200d0ee8.chunk.js.map