(this.webpackJsonp8connect4=this.webpackJsonp8connect4||[]).push([[0],{109:function(e,t,n){},115:function(e){e.exports=JSON.parse('"wss://8c4server.ocean.lol"')},138:function(e,t,n){},179:function(e,t,n){},180:function(e,t,n){"use strict";n.r(t);n(137),n(138);var a=n(124),r=Object(a.a)({palette:{type:"dark",background:{default:"#050505"},primary:{main:"#d49a3d"}},overrides:{MuiButton:{textPrimary:{background:"linear-gradient(45deg, #ff7b00 0%, #ff00ff 100%)",borderRadius:3,border:0,color:"white !important",padding:"0 30px",boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)"},textSecondary:{background:"linear-gradient(45deg, rgb(255,37,180) 30%, rgb(198,19,19) 90%)",borderRadius:3,border:0,color:"white !important",padding:"0 30px",boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)"}}}}),c=n(2),i=n(0),s=n.n(i),o=n(11),l=n.n(o),d=n(226),m=n(225),j=n(114),u=n.n(j),h=n(115),b=n(23),p=n.n(b),f=n(53),g=n(50),x=n(65),O=n(66),y=n(36),v=n(78),I=n(77),w=n(5),C=n(181),N=n(247),k=n(224),T=n(222),B=n(223),A=n(221),E=function(e){Object(v.a)(n,e);var t=Object(I.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state={open:!1},a.handleOpen=a.handleOpen.bind(Object(y.a)(a)),a.handleClose=a.handleClose.bind(Object(y.a)(a)),a}return Object(O.a)(n,[{key:"handleOpen",value:function(){this.setState({open:!0})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){var e=this.props.classes;return Object(c.jsx)("div",{children:Object(c.jsxs)(N.a,{open:this.state.open,onClose:this.handleClose,disablePortal:!0,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",disableBackdropClick:this.props.required,disableEscapeKeyDown:this.props.required,children:[Object(c.jsx)(A.a,{id:"alert-dialog-title",children:this.props.title}),Object(c.jsxs)(T.a,{dividers:!0,children:[Object(c.jsx)(B.a,{className:e.text,id:"alert-dialog-description",children:this.props.description}),this.props.children]}),Object(c.jsxs)(k.a,{children:[this.props.required?null:Object(c.jsx)(C.a,{onClick:this.handleClose,color:"secondary",children:"Close"}),this.props.buttonText?Object(c.jsx)(C.a,{onClick:this.props.buttonAction,color:"primary",children:this.props.buttonText}):null]})]})})}}]),n}(s.a.Component),M=Object(w.a)((function(e){return{text:{margin:0}}}))(E);function S(){return L.apply(this,arguments)}function L(){return(L=Object(g.a)(p.a.mark((function e(){var t,n,a=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:null,e.abrupt("return",new Promise(function(){var e=Object(g.a)(p.a.mark((function e(a){var i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.assign({title:"Dialog title",required:!1},t),l.a.render(Object(c.jsxs)(m.a,{theme:r,children:[Object(c.jsx)(d.a,{}),Object(c.jsx)(M,Object(f.a)(Object(f.a)({},t),{},{ref:function(e){return i=e},children:n}))]}),document.getElementById("dialog")),i?(i.handleOpen(),a(i)):setTimeout(Object(g.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,S(t,n);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)}))),100);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W=S,G=(n(109),n(227));var R=function(){return Object(c.jsxs)("div",{className:"centred",children:[Object(c.jsx)(G.a,{}),Object(c.jsx)("h3",{children:"Attempting to connect to the 8connect4 server..."})]})},P=n(117),D=n.n(P);var F=function(e){return Object(c.jsxs)("div",{className:"centred",children:[Object(c.jsx)(D.a,{}),Object(c.jsx)("h3",{children:"Failed to connect to the 8connect4 server."}),e.error?Object(c.jsxs)("p",{children:['Error: "',e.error,'"']}):null,Object(c.jsx)("h4",{children:"Are you offline? If not, the 8connect4 server might be down."}),Object(c.jsx)(C.a,{size:"large",color:"primary",onClick:function(){return window.location.reload(!1)},children:"Retry"})]})},z=n(79),H=n(235),q=n(231),J=n(4),K=n(249),U=n(229),Y=n(228),_=n(230),V=n(183),X=n(118),Q=n.n(X),Z=function(e){Object(v.a)(n,e);var t=Object(I.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state={code:""},a.changeInput=a.changeInput.bind(Object(y.a)(a)),a.tryCode=a.tryCode.bind(Object(y.a)(a)),a}return Object(O.a)(n,[{key:"changeInput",value:function(e){var t=e.target.value;t=t.replace(" ",""),this.setState({code:t})}},{key:"tryCode",value:function(){Ft.emit("joinMatch",this.state.code)}},{key:"render",value:function(){var e=this,t=this.props.classes;return Object(c.jsxs)("div",{children:[Object(c.jsx)("label",Object(f.a)(Object(f.a)({},{}),{},{htmlFor:"roomCodeInput",children:"Or, join by code:"})),Object(c.jsx)("br",{}),Object(c.jsxs)(K.a,{className:Object(J.a)(t.margin,t.textField),variant:"filled",children:[Object(c.jsx)(Y.a,{htmlFor:"roomCodeInput",children:"Room code"}),Object(c.jsx)(U.a,{id:"roomCodeInput",type:"text",value:this.state.code,onChange:this.changeInput,autoComplete:"off",inputProps:{className:t.textInput,maxLength:6,onKeyDown:function(t){"Enter"==t.key&&e.tryCode()}},endAdornment:Object(c.jsx)(_.a,{position:"end",children:Object(c.jsx)(V.a,{"aria-label":"Join",onClick:this.tryCode,edge:"end",children:Object(c.jsx)(Q.a,{})})})})]})]})}}]),n}(s.a.Component),$=Object(w.a)((function(e){return{margin:{margin:e.spacing(1),marginBottom:0},joinLabel:{display:"inline-block",marginTop:22,marginRight:4},textField:{width:"18ch"},textInput:{textTransform:"uppercase"}}}))(Z),ee=n(39),te=n(244),ne=n(232),ae=n(119),re=n.n(ae),ce=Object(q.a)((function(e){return{margin:{margin:e.spacing(1)},input:{width:170},label:{textAlign:"center"}}}));var ie=function(){var e=ce(),t=s.a.useState(localStorage.name?localStorage.name:""),n=Object(ee.a)(t,2),a=n[0],r=n[1],i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t||r(e),localStorage.name=e,Ft.emit("changeName",e)};return i(a,!0),Object(c.jsx)("div",{className:e.margin,children:Object(c.jsxs)(ne.a,{container:!0,justify:"center",spacing:1,alignItems:"flex-end",children:[Object(c.jsx)(ne.a,{item:!0,children:Object(c.jsx)(re.a,{})}),Object(c.jsx)(ne.a,{item:!0,children:Object(c.jsx)(te.a,{id:"nameInput",label:"Your name",value:a,onChange:function(e){return i(e.target.value)},autoComplete:"off",inputProps:{className:e.input,maxLength:12,onKeyDown:function(e){"Enter"==e.key&&document.activeElement.blur()}},InputLabelProps:{className:e.label}})})]})})},se=n(44),oe=n(234),le=n(182),de=n(236),me=n(250),je=n(237),ue=n(246),he=n(75),be=n.n(he),pe=n(73),fe=n.n(pe),ge=[1,32],xe=[1,12],Oe=Object(q.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:300},selectEmpty:{marginTop:e.spacing(2)}}})),ye=[1,2,3,5,8,12,15,20,30,45,60,120],ve=function(e){return"".concat(ye[e],"s")},Ie={public:!1,players:9,gameMax:4,turnTime:8,runDownTimer:!0};function we(e){return Object(c.jsxs)(oe.a,{size:"small",children:[Object(c.jsx)(C.a,{onClick:function(){return e.fn(-1/0)},children:"<<"}),Object(c.jsx)(C.a,{onClick:function(){return e.fn(-10)},children:"- -"}),Object(c.jsx)(C.a,{onClick:function(){return e.fn(-1)},children:"-"}),Object(c.jsx)(C.a,{disabled:!0,children:e.state}),Object(c.jsx)(C.a,{onClick:function(){return e.fn(1)},children:"+"}),Object(c.jsx)(C.a,{onClick:function(){return e.fn(10)},children:"++"}),Object(c.jsx)(C.a,{onClick:function(){return e.fn(1/0)},children:">>"})]})}function Ce(){var e=Oe(),t=s.a.useState(Ie.public),n=Object(ee.a)(t,2),a=n[0],r=n[1],i=s.a.useState(Ie.players),o=Object(ee.a)(i,2),l=o[0],d=o[1],m=s.a.useState(Ie.gameMax),j=Object(ee.a)(m,2),u=j[0],h=j[1],b=s.a.useState(ye.indexOf(Ie.turnTime)),p=Object(ee.a)(b,2),f=p[0],g=p[1],x=s.a.useState(Ie.runDownTimer),O=Object(ee.a)(x,2),y=O[0],v=O[1];return Object(c.jsxs)("div",{children:[Object(c.jsx)(H.a,{style:{marginTop:16,marginBottom:8}}),Object(c.jsx)(le.a,{children:"Privacy"}),Object(c.jsx)(z.a,{component:"div",children:Object(c.jsxs)(ne.a,{component:"label",container:!0,alignItems:"center",spacing:1,children:[Object(c.jsx)(ne.a,{item:!0,children:Object(c.jsx)(fe.a,{})}),Object(c.jsx)(ne.a,{item:!0,children:Object(c.jsx)(de.a,{color:"primary",checked:a,onChange:function(e){Ie.public=!a,r(!a)}})}),Object(c.jsx)(ne.a,{item:!0,children:Object(c.jsx)(be.a,{})})]})}),Object(c.jsx)(H.a,{}),Object(c.jsxs)(K.a,{className:e.formControl,children:[Object(c.jsx)(le.a,{style:{marginBottom:5},children:"Max players"}),Object(c.jsx)(we,{fn:function(e){Ie.players+=e,Ie.players<ge[0]&&(Ie.players=ge[0]),Ie.players>ge[1]&&(Ie.players=ge[1]),d(Ie.players)},state:l})]}),Object(c.jsx)(H.a,{}),Object(c.jsxs)(K.a,{className:e.formControl,children:[Object(c.jsx)(le.a,{style:{marginBottom:5},children:"Max games per player per colour"}),Object(c.jsx)(we,{fn:function(e){Ie.gameMax+=e,Ie.gameMax<xe[0]&&(Ie.gameMax=xe[0]),Ie.gameMax>xe[1]&&(Ie.gameMax=xe[1]),h(Ie.gameMax)},state:u})]}),Object(c.jsx)(H.a,{style:{marginBottom:8}}),Object(c.jsx)(le.a,{children:"Turn time"}),Object(c.jsx)(me.a,{value:f,onChange:function(e,t){Ie.turnTime=ye[t],g(t)},step:null,marks:Object(se.a)(ye.keys()).map((function(e){return{value:e,label:String(ye[e])}})),min:0,max:ye.length-1,getAriaValueText:ve,valueLabelFormat:ve,valueLabelDisplay:"auto"}),Object(c.jsx)(H.a,{style:{marginBottom:8}}),Object(c.jsx)(je.a,{control:Object(c.jsx)(ue.a,{color:"primary",checked:y,onChange:function(e){Ie.runDownTimer=!y,v(!y)}}),label:"Always run down turn timer?",labelPlacement:"start"})]})}function Ne(){return(Ne=Object(g.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W({title:"Create Match",description:"Match options:",buttonText:"Create",buttonAction:function(){t.handleClose(),Ft.emit("createMatch",Ie)}},Object(c.jsx)(Ce,{}));case 2:t=e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ke=function(){return Ne.apply(this,arguments)},Te=Object(q.a)({logoImage:{display:"block",textAlign:"center",margin:"auto",maxWidth:350},controls:{textAlign:"center",border:"1px solid #ffffff1f",borderRadius:10}});var Be=function(){var e=Te();return Object(c.jsxs)("div",{children:[Object(c.jsx)(z.a,{className:e.title,variant:"h3",gutterBottom:!0,children:Object(c.jsx)("img",{className:e.logoImage,src:"/iconanimated.png",alt:"8connect4"})}),Object(c.jsx)(z.a,{variant:"body1",gutterBottom:!0,children:"Play 8 games of connect 4 at once."}),Object(c.jsxs)("div",{className:e.controls,children:[Object(c.jsx)(ie,{}),Object(c.jsx)(H.a,{}),Object(c.jsx)("br",{}),Object(c.jsx)(C.a,{size:"large",color:"primary",onClick:function(){return Ft.emit("findMatch")},children:"Find Match"}),Object(c.jsx)("br",{}),Object(c.jsx)(C.a,{size:"small",color:"secondary",onClick:ke,children:"Create Match"}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsx)($,{})]})]})},Ae=n(238),Ee=n(239),Me=n(248),Se=n(240),Le=n(217),We=n(241),Ge=n(242),Re=n(243),Pe=n(122),De=n.n(Pe),Fe=n(121),ze=n.n(Fe),He=Object(q.a)({root:{textAlign:"center"},privacyIcon:{marginRight:10},table:{width:400,margin:"auto"},head:{backgroundColor:"black"},tableCell:{textAlign:"center"},you:{color:"red",fontWeight:"bold"}});var qe=function(e){for(var t=He(),n=[],a=0;a<e.matchInfo.maxPlayers;a++){var r="",i=!1;a in e.matchInfo.players&&(r=e.matchInfo.players[a].name,i=Ft.id.startsWith(e.matchInfo.players[a].id)),n.push(Object(c.jsx)(Ae.a,{children:Object(c.jsxs)(Ee.a,{className:t.tableCell,children:[a in e.matchInfo.players&&e.matchInfo.host==e.matchInfo.players[a].id?Object(c.jsx)(Me.a,{title:"This player is the host. They have the ability to start the game.",children:Object(c.jsx)(ze.a,{fontSize:"inherit"})}):null,i?Object(c.jsx)("span",{className:t.you,children:r}):r]})},a))}e.matchInfo.starting&&new Audio("/countdown/".concat(e.matchInfo.startTimer,".mp3")).play();var s=Ft.id.startsWith(e.matchInfo.host);return Object(c.jsxs)("div",{children:[Object(c.jsx)(V.a,{onClick:function(){return window.location.reload()},children:Object(c.jsx)(De.a,{})}),Object(c.jsxs)("div",{className:t.root,children:[Object(c.jsx)(z.a,{variant:"overline",display:"block",gutterBottom:!0,children:"Room code"}),Object(c.jsxs)(z.a,{variant:"h3",gutterBottom:!0,children:[Object(c.jsx)("span",{className:t.privacyIcon,children:e.matchInfo.public?Object(c.jsx)(Me.a,{title:"This is a public match. Anyone can join this match from the 'Find Match' button on the homepage.",children:Object(c.jsx)(be.a,{})}):Object(c.jsx)(Me.a,{title:"This is a private match. Only people with the room code can join.",children:Object(c.jsx)(fe.a,{})})}),e.matchInfo.code]}),e.matchInfo.starting?Object(c.jsxs)(z.a,{variant:"h4",children:["Starting in ",e.matchInfo.startTimer,"..."]}):Object(c.jsx)(Me.a,{title:s?"Begin a timer to start the match. No more players will be able to join.":"Only the host can start the match.",children:Object(c.jsx)("span",{children:Object(c.jsx)(C.a,{color:s?"primary":"default",size:"large",onClick:function(){return Ft.emit("startMatch")},disabled:!s,children:"Start Match"})})}),Object(c.jsx)(Se.a,{component:Le.a,children:Object(c.jsxs)(We.a,{children:[Object(c.jsx)(Ge.a,{children:Object(c.jsx)(Ae.a,{className:t.head,children:Object(c.jsxs)(Ee.a,{className:t.tableCell,children:["Players: ",e.matchInfo.players.length,"/",e.matchInfo.maxPlayers]})})}),Object(c.jsx)(Re.a,{children:n})]})})]})]})},Je=n(54),Ke=(n(179),Object(q.a)({gameInfo:{display:"flex",width:"100%",marginBottom:20,margin:"auto",alignItems:"center",justifyContent:"space-between",position:"sticky",top:0,backgroundColor:"black",borderBottom:"1px solid #ffffff1f",zIndex:100,"& div":{flexGrow:1}},gameInfoTitle:{textAlign:"center"},gameInfoContent:{display:"flex",alignItems:"end",justifyContent:"center"},title:{textAlign:"center"},colourIndicator:{height:49},playerArea:{paddingTop:8,paddingBottom:8,marginBottom:16,textAlign:"center",border:"1px solid #ffffff1f",borderRadius:10},selfGameImage:{width:125},otherGameImage:{width:100},playingGamesContainer:{},playingGames:{display:"flex",maxWidth:600,margin:"auto",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},otherGamesContainer:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},otherGames:{display:"flex",maxWidth:600,alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},vsMe:{color:"red"}}));function Ue(e){var t=Ke(),n=Object.keys(e.game.players).find((function(t){return e.playerId.startsWith(e.game.players[t])})),a=e.players.find((function(t){return t.id.startsWith(e.game.players["a"==n?"b":"a"])}));return Object(c.jsxs)("div",{children:[Object(c.jsx)("img",{"data-playercolour":e.playerColour,className:"".concat(e.self?"self-game ":"").concat(e.self?t.selfGameImage:t.otherGameImage," ").concat(e.self&&1==e.games.length&&"b"==e.playerColour?"game-b":"game-".concat(n)," game").concat(e.game.id)}),Object(c.jsxs)(z.a,{variant:"caption",display:"block",children:["Game ",e.game.name," vs ",e.myId.startsWith(a.id)?Object(c.jsx)("span",{className:t.vsMe,children:a.name}):a.name]})]})}function Ye(e){var t=Ke(),n=e.self?t.playingGames:t.otherGames;return Object(c.jsxs)("div",{className:t.playerArea,children:[e.self?Object(c.jsxs)("div",{children:[Object(c.jsx)(z.a,{variant:"h4",children:e.player.name}),Object(c.jsx)(H.a,{})]}):Object(c.jsx)(z.a,{variant:"h6",gutterBottom:!0,children:e.player.name}),Object(c.jsxs)("div",{className:e.self?t.playingGamesContainer:t.otherGamesContainer,children:[Object(c.jsxs)("div",{className:n,children:[e.self?Object(c.jsx)("img",{className:"".concat(t.colourIndicator," colour-indicator-a"),src:"/a.png"}):null,e.games.filter((function(t){return e.player.id.startsWith(t.players.a)})).map((function(t){return Object(c.jsx)(Ue,{self:e.self,game:t,games:e.games,players:e.players,playerColour:"a",playerId:e.player.id,myId:e.myId})})),e.self?null:Object(c.jsx)("img",{className:"".concat(t.colourIndicator," colour-indicator-a"),src:"/a.png"})]}),e.self?Object(c.jsx)("div",{id:"controller",className:t.controls}):null,Object(c.jsxs)("div",{className:n,children:[Object(c.jsx)("img",{className:"".concat(t.colourIndicator," colour-indicator-b"),src:"/b.png"}),e.games.filter((function(t){return e.player.id.startsWith(t.players.b)})).map((function(t){return Object(c.jsx)(Ue,{self:e.self,game:t,games:e.games,players:e.players,playerColour:"b",playerId:e.player.id,myId:e.myId})}))]})]})]})}var _e=function(e){var t=Ke(),n=e.players.find((function(t){return e.myId.startsWith(t.id)}));return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:t.gameInfo,children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:t.gameInfoTitle,children:Object(c.jsx)(z.a,{variant:"subtitle1",children:"Ongoing games"})}),Object(c.jsxs)("div",{className:t.gameInfoContent,children:[Object(c.jsx)(z.a,{variant:"h3",children:Object(c.jsx)("span",{id:"gamesLeft",children:"0"})}),Object(c.jsxs)(z.a,{variant:"h5",children:["/",Object(c.jsx)("span",{id:"maxGames",children:"0"})]})]})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:t.gameInfoTitle,children:Object(c.jsx)(z.a,{variant:"subtitle1",children:"Turn time left"})}),Object(c.jsx)("div",{className:t.gameInfoContent,children:Object(c.jsx)(z.a,{variant:"h3",children:Object(c.jsx)("span",{id:"turnTime",children:"0"})})})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:t.gameInfoTitle,children:Object(c.jsx)(z.a,{variant:"subtitle1",children:"Turn"})}),Object(c.jsx)("div",{className:t.gameInfoContent,children:Object(c.jsxs)(z.a,{variant:"h3",children:[Object(c.jsx)("img",{height:"35",id:"turnIndicator"}),Object(c.jsx)("span",{id:"turnNumber",children:"0"})]})})]})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)(Ye,{player:n,players:e.players,games:e.games,self:!0,myId:e.myId}),e.players.filter((function(t){return!e.myId.startsWith(t.id)})).map((function(t){return Object(c.jsx)(Ye,{player:t,players:e.players,games:e.games,self:!1,myId:e.myId})}))]})]})},Ve=n(123),Xe=n.n(Ve),Qe=Object(q.a)({root:{textAlign:"center"},tableCell:{textAlign:"center"},gamesContainer:{display:"flex",flexWrap:"wrap",justifyContent:"center","& div":{marginLeft:25,marginRight:25}},gameImage:{width:150},counterImage:{height:10},you:{color:"red"},otherPlayer:{}});var Ze=function(e){for(var t=Qe(),n=function(n){return e.myId.startsWith(n.id)?t.you:t.otherPlayer},a=0,r=1;r<e.results.length&&e.results[r].score==e.results[0].score;r++)a=r;return new Audio("/endMatch.mp3").play(),Object(c.jsx)("div",{children:Object(c.jsxs)("div",{className:t.root,children:[Object(c.jsx)(V.a,{onClick:function(){return window.location.reload()},children:Object(c.jsx)(Xe.a,{})}),Object(c.jsxs)(z.a,{variant:"h2",children:["Winner",0==a?"":"s",":"]}),Object(c.jsx)(z.a,{variant:"h4",gutterBottom:!0,children:e.results.slice(0,a+1).map((function(e){return e.name})).join(", ")}),Object(c.jsx)(Se.a,{component:Le.a,children:Object(c.jsx)(We.a,{children:Object(c.jsx)(Re.a,{children:e.results.map((function(n){return Object(c.jsx)(Ae.a,{children:Object(c.jsxs)(Ee.a,{className:t.tableCell,children:[n.placement,". ",e.myId.startsWith(n.id)?Object(c.jsx)("span",{className:t.you,children:n.name}):n.name," with a score of ",n.score,"."]})})}))})})}),Object(c.jsx)(z.a,{variant:"h3",children:"Games"}),Object(c.jsx)("div",{className:t.gamesContainer,children:e.games.map((function(e){return Object(c.jsxs)("div",{children:[Object(c.jsx)("img",{src:e.src,className:t.gameImage}),Object(c.jsxs)(z.a,{variant:"caption",display:"block",children:["Game ",e.name,Object(c.jsx)("br",{}),Object(c.jsx)("span",{className:n(e.players.a),children:e.players.a.name})," ",Object(c.jsx)("img",{className:t.counterImage,src:"/a.png"})," vs ",Object(c.jsx)("img",{className:t.counterImage,src:"/b.png"})," ",Object(c.jsx)("span",{className:n(e.players.b),children:e.players.b.name}),Object(c.jsx)("br",{}),0==e.outcome?"Draw":Object(c.jsxs)("span",{children:["Winner: ",Object(c.jsx)("img",{className:t.counterImage,src:"/".concat(e.outcome,".png")})]})]})]})}))})]})})};for(var $e={a:new Image,b:new Image,hover:{},outcomeOverlay:{}},et=0,tt=["a","b"];et<tt.length;et++){var nt=tt[et],at="/".concat(nt,".png");$e[nt].src=at,$e.hover[nt]=new Image,$e.hover[nt].src="/hover_".concat(nt,".png")}for(var rt=0,ct=["win","loss","draw"];rt<ct.length;rt++){var it=ct[rt],st=new Image;st.src="/outcome/".concat(it,".png"),$e.outcomeOverlay[it]=st}var ot=$e,lt=100,dt=document.createElement("canvas");dt.width=732,dt.height=108;var mt=dt.getContext("2d"),jt=null,ut="a";function ht(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;mt.clearRect(0,0,dt.width,dt.height),mt.fillStyle="white";for(var t=0;t<8;t++)mt.fillRect(104*t,0,4,dt.height);for(var n=0;n<2;n++)mt.fillRect(0,104*n,dt.width,4);if(null!=e){e.type.startsWith("touch")&&(e=e.changedTouches[0]);var a=e.target.getBoundingClientRect(),r=(e.clientX-a.left-4)*(dt.width/a.width),c=(e.clientY-a.top-4)*(dt.height/a.height);if(r<0||c<0)return;if(c>=lt)return;if(r%104>=lt)return;var i=Math.floor(r/104);jt!=i&&(jt=i,Ft.emit("hover",jt))}if(null!=jt){var s=ot[ut];s.complete&&mt.drawImage(s,4+104*jt,4,lt,lt)}}function bt(){Ft.emit("move",ut,jt),jt=null,Ft.emit("hover",jt),ht()}ht(),dt.addEventListener("mousemove",ht),dt.addEventListener("touchstart",ht),dt.addEventListener("touchmove",ht),dt.addEventListener("touchend",bt),dt.addEventListener("mousedown",bt);var pt,ft,gt,xt=50,Ot="123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",yt=new Audio("/place.mp3"),vt=new Audio("/otherPlace.mp3"),It=new Audio("/endGame.mp3"),wt=new Audio("/startTurn.mp3"),Ct=[],Nt=[],kt=0,Tt="a",Bt=Date.now(),At=document.createElement("canvas");At.width=382,At.height=378;var Et=At.getContext("2d");function Mt(){var e=(Bt-Date.now())/1e3;e<0&&(e=0),document.getElementById("turnTime").innerHTML=e.toFixed(2)}function St(e){document.getElementById("turnNumber").innerHTML=++kt,Tt=e,Bt=Date.now()+pt.turnTime;for(var t=0,n=[].concat(Object(se.a)(document.getElementsByClassName("game-".concat("a"==e?"b":"a"))),Object(se.a)(document.getElementsByClassName("colour-indicator-".concat("a"==e?"b":"a"))));t<n.length;t++){n[t].classList.add("inactive-game")}for(var a=0,r=[].concat(Object(se.a)(document.getElementsByClassName("game-".concat(e))),Object(se.a)(document.getElementsByClassName("colour-indicator-".concat(e))));a<r.length;a++){r[a].classList.remove("inactive-game")}var c,i=Object(Je.a)(Ct);try{for(i.s();!(c=i.n()).done;){c.value.hover=null}}catch(s){i.e(s)}finally{i.f()}document.getElementById("turnIndicator").src="/".concat(e,".png"),function(e){ut=e,jt=null,ht()}(e),kt>1&&wt.play()}function Lt(e,t,n){e.complete&&Et.drawImage(e,54*Number(t)+4,54*(Number(n)+1),xt,xt)}function Wt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Et.clearRect(0,0,At.width,At.height),Et.fillStyle="white";for(var n=0;n<=6;n++)Et.fillRect(0,xt+54*n,At.width,4);for(var a=0;a<=7;a++)Et.fillRect(54*a,xt,4,At.height-xt);for(var r in e.state)for(var c in e.state[r]){var i=e.state[r][c];null!=i&&Lt(ot[i],c,r)}if(null!==e.hover){Lt(ot[Tt],e.hover,-1);for(var s=null,o=0;o<6;o++)if(null!=e.state[o][e.hover]){s=o-1;break}-1==s&&(s=!1),null==s&&(s=5),!1!==s&&(ot.hover[Tt].complete&&(Et.globalAlpha=.15,Et.drawImage(ot.hover[Tt],54*Number(e.hover)+4,54,xt,54*(Number(s)+1)-4)),Et.globalAlpha=.5,Lt(ot[Tt],e.hover,s),Et.globalAlpha=1)}return null!=t&&t.complete&&(Et.globalAlpha=.75,Et.drawImage(t,0,0,At.width,At.height),Et.globalAlpha=1),At.toDataURL()}function Gt(e){var t,n=Wt(Ct[e]),a=Object(Je.a)(document.getElementsByClassName("game".concat(e)));try{for(a.s();!(t=a.n()).done;){t.value.src=n}}catch(r){a.e(r)}finally{a.f()}}var Rt=u()(h,{transports:["websocket"]}),Pt=!1;function Dt(e){setTimeout((function(){Rt.disconnected&&(l.a.render(Object(c.jsxs)(m.a,{theme:r,children:[Object(c.jsx)(d.a,{}),Object(c.jsx)(F,{error:e.toString()})]}),document.getElementById("root")),Rt.disconnect())}),1e4)}l.a.render(Object(c.jsxs)(m.a,{theme:r,children:[Object(c.jsx)(d.a,{}),Object(c.jsx)(R,{})]}),document.getElementById("root")),Rt.on("connect",(function(){Pt||(Pt=!0,l.a.render(Object(c.jsxs)(m.a,{theme:r,children:[Object(c.jsx)(d.a,{}),Object(c.jsx)(Be,{})]}),document.getElementById("root")))})),Rt.on("connect_error",Dt),Rt.on("connect_timeout",Dt),Rt.on("disconnect",Dt),Rt.on("err",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown error",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Error:";W({title:t,description:e})})),Rt.on("joinMatch",(function(){})),Rt.on("matchUpdate",(function(e){e.started||l.a.render(Object(c.jsxs)(m.a,{theme:r,children:[Object(c.jsx)(d.a,{}),Object(c.jsx)(qe,{matchInfo:e})]}),document.getElementById("root"))})),Rt.on("matchStart",(function(e){return function(e,t){for(var n in ft=t,pt=e,kt=0,e.games){for(var a=e.games[n],i=[],s=0;s<6;s++){for(var o=[],j=0;j<7;j++)o.push(null);i.push(o)}Ct.push({id:n,name:n+1>Ot.length?"".concat(Ot[~~(n/Ot.length)]).concat(Ot[n%Ot.length]):Ot[n],players:a.players,state:i})}gt=Ct.length,l.a.render(Object(c.jsxs)(m.a,{theme:r,children:[Object(c.jsx)(d.a,{}),Object(c.jsx)(_e,{players:e.players,games:Ct,myId:ft})]}),document.getElementById("root"),(function(){for(var e in document.getElementById("controller").appendChild(dt),dt.style.touchAction="none",document.getElementById("maxGames").innerHTML=gt,document.getElementById("gamesLeft").innerHTML=gt,Ct)Gt(e);Nt.timer=setInterval(Mt,1e3/24),new Audio("/startMatch.mp3").play()}))}(e,Rt.id)})),Rt.on("turnSwitch",(function(e){return St(e)})),Rt.on("hover",(function(e,t,n){return function(e,t,n){t==Tt&&(Ct[e].hover=n),Gt(e)}(e,t,n)})),Rt.on("move",(function(e,t,n,a){return function(e,t,n,a){var r=Ct[e];r.state[n][a]=t,r.hover=null,Gt(e),ft.startsWith(r.players[t])||vt.play()}(e,t,n,a)})),Rt.on("takenTurn",(function(e){return function(e){if(yt.play(),e==Tt){var t,n=Object(Je.a)(document.querySelectorAll(".self-game.game-".concat(e)));try{for(n.s();!(t=n.n()).done;)t.value.classList.add("inactive-game")}catch(a){n.e(a)}finally{n.f()}}}(e)})),Rt.on("outcomeDecided",(function(e,t){return function(e,t){document.getElementById("gamesLeft").innerHTML=--gt,Ct[e].outcome=t;var n,a=Object(Je.a)(document.getElementsByClassName("game".concat(e)));try{for(a.s();!(n=a.n()).done;){var r=n.value;r.classList.add("game-outcome-decided");var c=void 0;0==t?c="draw":t==r.getAttribute("data-playercolour")?c="win":c="loss",r.src=Wt(Ct[e],ot.outcomeOverlay[c])}}catch(i){a.e(i)}finally{a.f()}It.play()}(e,t)})),Rt.on("endMatch",(function(e){return function(e){for(var t in Nt)clearInterval(Nt[t]),delete Nt[t];var n,a=Object(Je.a)(Ct);try{var i=function(){var e=n.value;e.src=Wt(e);var t=function(t){e.players[t]=pt.players.find((function(n){return n.id==e.players[t]}))};for(var a in e.players)t(a)};for(a.s();!(n=a.n()).done;)i()}catch(s){a.e(s)}finally{a.f()}Ct.sort((function(e,t){return Ot.indexOf(e.name)-Ot.indexOf(t.name)})),l.a.render(Object(c.jsxs)(m.a,{theme:r,children:[Object(c.jsx)(d.a,{}),Object(c.jsx)(Ze,{myId:ft,results:e,games:Ct})]}),document.getElementById("root")),pt=null,Ct=[],Nt=[]}(e)}));var Ft=Rt}},[[180,1,2]]]);
//# sourceMappingURL=main.91ee70ea.chunk.js.map