{"version":3,"sources":["theme/index.js","Dialog/index.js","Dialog/show.js","socket/Connect/ing.js","socket/Connect/Failed.js","Home/CodeInput.js","Home/NameInput.js","Home/showMatchOptions.js","Home/index.js","Lobby/getCounter.js","Lobby/Cosmetics.js","Lobby/index.js","Match/index.js","Results/index.js","Match/images.js","Match/shuffleString.js","Match/controller.js","Match/gameplay.js","socket/index.js"],"names":["theme","createMuiTheme","palette","type","background","default","primary","main","overrides","MuiButton","textPrimary","borderRadius","border","color","padding","boxShadow","textSecondary","Dialog","props","state","open","handleOpen","bind","handleClose","this","setState","classes","onClose","disablePortal","aria-labelledby","aria-describedby","disableBackdropClick","required","disableEscapeKeyDown","DialogTitle","id","title","DialogContent","dividers","DialogContentText","className","text","description","children","DialogActions","Button","onClick","buttonText","buttonAction","React","Component","withStyles","margin","showDialog","a","Promise","res","Object","assign","layer","element","document","getElementById","createElement","appendChild","ReactDOM","render","ThemeProvider","CssBaseline","ref","dialog","setTimeout","Connecting","CircularProgress","ConnectFailed","error","size","window","location","reload","CodeInput","code","changeInput","tryCode","event","target","value","replace","socket","emit","search","length","slice","history","pushState","htmlFor","FormControl","clsx","textField","variant","InputLabel","FilledInput","onChange","autoComplete","inputProps","textInput","maxLength","onKeyDown","e","key","endAdornment","InputAdornment","position","IconButton","aria-label","edge","spacing","marginBottom","joinLabel","display","marginTop","marginRight","width","textTransform","useStyles","makeStyles","input","label","textAlign","NameInput","useState","localStorage","name","setName","changeName","newName","first","Grid","container","justify","alignItems","item","TextField","activeElement","blur","InputLabelProps","allowedPlayers","maxGamesAllowed","formControl","select","timerMarks","timerMarksFormat","n","options","defaultMatchOptions","MatchOptions","JSON","parse","NumberTweaker","ButtonGroup","fn","disabled","min","max","sendUpdate","editable","started","public","publicity","setPublicity","players","setPlayers","gameMax","setGameMax","lineLength","setLineLength","columns","setColumns","changeColumns","rows","setRows","changeRows","indexOf","turnTime","setTurnTime","runDownTimer","setRunDownTimer","names","nameConvention","setNameConvention","updateOptions","useEffect","addEventListener","removeEventListener","Divider","style","FormLabel","Typography","component","Switch","checked","change","RadioGroup","Number","row","map","FormControlLabel","control","Radio","Select","displayEmpty","filter","MenuItem","FormHelperText","top","fontSize","minWidth","paddingRight","Slider","step","marks","keys","String","getAriaValueText","valueLabelFormat","valueLabelDisplay","Checkbox","labelPlacement","0","1","2","showMatchOptions","stringify","changeOptions","newOptions","dispatchEvent","Event","hostChanged","amNowHost","logoImage","maxWidth","controls","Home","showTutorial","videoId","Link","href","rel","tutorialWatched","height","src","frameBorder","allow","allowFullScreen","hasOwnProperty","gutterBottom","alt","getCounter","c","cosmetics","imgName","repeat","availableCounters","i","char","emptySelection","s","f","Cosmetics","selection","setSelection","ToggleButtonGroup","available","choice","ToggleButton","p","newSelection","root","privacyIcon","table","head","backgroundColor","tableCell","you","fontWeight","counterStyle","Lobby","tableBody","amHost","startsWith","matchInfo","host","content","push","TableRow","TableCell","Tooltip","starting","bot","Audio","startTimer","play","copyHelp","copyTitle","setCopyTitle","copy","protocol","TableContainer","Paper","Table","TableHead","anchorEl","setAnchorEl","Boolean","currentTarget","Popover","anchorOrigin","vertical","horizontal","transformOrigin","diff","index","TableBody","gameInfo","justifyContent","borderBottom","zIndex","flexGrow","gameInfoTitle","gameInfoContent","colourIndicator","playerArea","paddingTop","paddingBottom","selfGameImage","maxHeight","otherGameImage","playingGamesContainer","playingGames","flexWrap","otherGamesContainer","otherGames","vsMe","GameImage","colour","game","playerIDs","find","playerId","opponent","player","data-playercolour","playerColour","self","games","myId","TurnTakenIndicator","cx","cy","r","fill","PlayerGames","gameRowClass","b","Match","selfPlayer","gamesContainer","marginLeft","gameImage","counterImage","otherPlayer","Results","playerClass","winnersStop","results","score","join","placement","rjCode","shuffleString","images","counters","Image","hover","outcomeOverlay","j","jA","k","kA","l","img","boxSize","boardWidth","canvas","ctx","getContext","slot","turn","clearRect","fillStyle","fillRect","changedTouches","bbox","getBoundingClientRect","x","clientX","left","y","clientY","newSlot","Math","floor","image","complete","drawImage","move","gamesLeft","gameNameChars","placeAudio","otherPlaceAudio","gameEndAudio","startTurnAudio","intervals","turnNumber","turnTimerEnd","Date","now","showTimer","timeLeft","innerHTML","toFixed","playMatch","startingMatchInfo","sentId","font","textBaseline","column","fromEntries","order","newImages","getImage","g","controller","touchAction","drawBoardsOfId","timer","setInterval","switchTurn","newTurn","getElementsByClassName","classList","add","remove","drawCounter","checkLine","rD","cD","toCheck","checking","every","t","highlightColours","drawBoard","overlayImage","isDraw","showOrder","piece","fillText","globalAlpha","winner","winLocation","tiles","concat","squaresDone","some","square","gridlineSize","wrh","newWidth","newHeight","xOffset","yOffset","setTransform","toDataURL","board","socketIOClient","serverLocation","transports","connectedOnce","displayConnectionFail","disconnected","toString","disconnect","on","kicker","gameplay","gameId","status","setAttribute","querySelectorAll","outcome","boardId","relativeOutcome","getAttribute","clearInterval","sort"],"mappings":"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","file":"static/js/main.0eea69b5.chunk.js","sourcesContent":["import { createMuiTheme } from '@material-ui/core/styles';\n\nconst theme = createMuiTheme({\n    palette: {\n        type: 'dark',\n\n        background: {\n            default: '#050505',\n        },\n\n        primary: {\n            main: '#d49a3d',\n        },\n    },\n\n    overrides: {\n        MuiButton: {\n            textPrimary: {\n                background: 'linear-gradient(45deg, #ff7b00 0%, #ff00ff 100%)',\n                borderRadius: 3,\n                border: 0,\n                color: 'white !important',\n                padding: '0 30px',\n                boxShadow: '0 3px 5px 2px rgba(255, 105, 135, .3)',\n            },\n\n            textSecondary: {\n                background: 'linear-gradient(45deg, rgb(255,37,180) 30%, rgb(198,19,19) 90%)',\n                borderRadius: 3,\n                border: 0,\n                color: 'white !important',\n                padding: '0 30px',\n                boxShadow: '0 3px 5px 2px rgba(255, 105, 135, .3)',\n            }\n        },\n    },\n});\n\nexport default theme;","import React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport MUIDialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nconst useStyles = theme => ({\n    text: {\n        margin: 0,\n    },\n});\n\nclass Dialog extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            open: false,\n        };\n        this.handleOpen = this.handleOpen.bind(this);\n        this.handleClose = this.handleClose.bind(this);\n    }\n\n    handleOpen() {\n        this.setState({open: true});\n    };\n\n    handleClose() {\n        this.setState({open: false});\n    };\n\n    render() {\n        const { classes } = this.props;\n\n        return (\n            <div>\n                <MUIDialog\n                    open={this.state.open}\n                    onClose={this.handleClose}\n                    disablePortal\n                    aria-labelledby=\"alert-dialog-title\"\n                    aria-describedby=\"alert-dialog-description\"\n                    disableBackdropClick={this.props.required}\n                    disableEscapeKeyDown={this.props.required}\n                >\n                    <DialogTitle id=\"alert-dialog-title\">{this.props.title}</DialogTitle>\n                    <DialogContent dividers>\n                        <DialogContentText className={classes.text} id=\"alert-dialog-description\">\n                            {this.props.description}\n                        </DialogContentText>\n                        {this.props.children}\n                    </DialogContent>\n                    <DialogActions>\n                        {this.props.required ? null : (\n                            <Button onClick={this.handleClose} color=\"secondary\">\n                                Close\n                            </Button>\n                        )}\n                        {this.props.buttonText ? (\n                            <Button onClick={this.props.buttonAction} color=\"primary\">\n                                {this.props.buttonText}\n                            </Button>\n                        ) : null}\n                    </DialogActions>\n                </MUIDialog>\n            </div>\n        );\n    }\n}\n\nexport default withStyles(useStyles)(Dialog);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport theme from '../theme';\nimport { CssBaseline } from '@material-ui/core';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport Dialog from './';\n\nasync function showDialog(props = {}, children = null) {\n    return new Promise(async res => {\n        props = Object.assign({\n            title: 'Dialog title',\n            required: false,\n        }, props);\n    \n        let dialog;\n        let id = `dialog${props.layer ? props.layer : 0}`;\n        let element = document.getElementById(id);\n        if (element == null) {\n            element = document.createElement('div');\n            element.id = id;\n            document.getElementById('dialog').appendChild(element);\n        }\n        ReactDOM.render((\n            <ThemeProvider theme={theme}>\n                <CssBaseline />\n                <Dialog {...props} ref={element => dialog = element}>\n                    {children}\n                </Dialog>\n            </ThemeProvider>\n        ), element);\n        \n        if (!dialog) //if it didnt work,\n            setTimeout(async () => res(await showDialog(props, children)), 100); //try it again with a delay (yes i know i shouldnt but shut up it works)\n        else {\n            dialog.handleOpen();\n            res(dialog);\n        }\n    });\n}\n\nexport default showDialog;","import React from 'react';\nimport './centred.css';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nfunction Connecting() {\n    return (\n        <div className=\"centred\">\n            <CircularProgress />\n            <h3>Attempting to connect to the 8connect4 server...</h3>\n        </div>\n    );\n}\n\nexport default Connecting;","import React from 'react';\nimport './centred.css';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport Button from '@material-ui/core/Button';\n\nfunction ConnectFailed(props) {\n    return (\n        <div className=\"centred\">\n            <ClearIcon />\n            <h3>Failed to connect to the 8connect4 server.</h3>\n            {props.error ? <p>Error: \"{props.error}\"</p> : null}\n            <h4>Are you offline? If not, the 8connect4 server might be down.</h4>\n            <Button size=\"large\" color=\"primary\" onClick={() => window.location.reload(false)}>Retry</Button>\n        </div>\n    );\n}\n\nexport default ConnectFailed;","import React from 'react';\nimport socket from '../socket/';\nimport clsx from 'clsx';\nimport { withStyles } from '@material-ui/core/styles';\nimport FormControl from '@material-ui/core/FormControl';\nimport FilledInput from '@material-ui/core/FilledInput';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport IconButton from '@material-ui/core/IconButton';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\n\nconst useStyles = theme => ({\n    margin: {\n        margin: theme.spacing(1),\n        marginBottom: 0,\n    },\n    joinLabel: {\n        display: 'inline-block',\n        marginTop: 22,\n        marginRight: 4,\n    },\n    textField: {\n        width: '18ch',\n    },\n    textInput: {\n        textTransform: 'uppercase',\n    },\n});\n\nclass CodeInput extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            code: '',\n        };\n        this.changeInput = this.changeInput.bind(this);\n        this.tryCode = this.tryCode.bind(this);\n    }\n\n    changeInput(event) {\n        let code = event.target.value; //get the code entered from the input element\n        code = code.replace(' ', ''); //remove spaces, if any\n        this.setState({code}); //store the code in the state, so that it can be shown on the input element and accessed when the join button is clicked\n    }\n\n    tryCode() {\n        socket.emit('joinMatch', this.state.code);\n    }\n\n    componentDidMount() {\n        /*if (window.location.search.startsWith('?$')) {\n            let p = window.location.search.slice('?$'.length);\n        } else */if (window.location.search.length > 1) {\n            this.setState({code: window.location.search.slice(1)}, () => this.tryCode());\n            window.history.pushState('', '', '/');\n        }\n    }\n\n    render() {\n        const { classes } = this.props;\n\n        return (\n            <div>\n                <label {...{}/*className={classes.joinLabel}*/} htmlFor=\"roomCodeInput\">Or, join by code:</label>\n                <br />\n\n                <FormControl className={clsx(classes.margin, classes.textField)} variant=\"filled\">\n                    <InputLabel htmlFor=\"roomCodeInput\">Room code</InputLabel>\n                    <FilledInput\n                        id=\"roomCodeInput\"\n                        type=\"text\"\n                        value={this.state.code}\n                        onChange={this.changeInput}\n                        autoComplete=\"off\"\n                        inputProps={{\n                            className: classes.textInput,\n                            maxLength: 6,\n                            onKeyDown: e => {if (e.key == 'Enter') this.tryCode()},\n                        }}\n                        endAdornment={\n                            <InputAdornment position=\"end\">\n                                <IconButton\n                                    aria-label=\"Join\"\n                                    onClick={this.tryCode}\n                                    edge=\"end\"\n                                >\n                                    <ArrowForwardIcon />\n                                </IconButton>\n                            </InputAdornment>\n                        }\n                    />\n                </FormControl>\n            </div>\n        );\n    }\n}\n\nexport default withStyles(useStyles)(CodeInput);","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport FormControl from '@material-ui/core/FormControl';\nimport TextField from '@material-ui/core/TextField';\nimport Grid from '@material-ui/core/Grid';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport socket from '../socket';\n\nconst useStyles = makeStyles((theme) => ({\n    margin: {\n        margin: theme.spacing(1),\n    },\n    input: {\n        width: 170,\n    },\n    label: {\n        textAlign: 'center',\n    },\n}));\n\nfunction NameInput() {\n    const classes = useStyles();\n    const [name, setName] = React.useState(localStorage.name ? localStorage.name : '');\n    const changeName = (newName, first = false) => {\n        if (!first)\n            setName(newName);\n        localStorage.name = newName;\n        socket.emit('changeName', newName);\n    }\n    changeName(name, true);\n\n    const handleChange = event => changeName(event.target.value)\n\n    return (\n        <div className={classes.margin}>\n            <Grid container justify=\"center\" spacing={1} alignItems=\"flex-end\">\n                <Grid item>\n                    <AccountCircle />\n                </Grid>\n                <Grid item>\n                    <TextField\n                        id=\"nameInput\"\n                        label=\"Your name\"\n                        value={name}\n                        onChange={handleChange}\n                        autoComplete=\"off\"\n                        inputProps={{\n                            className: classes.input,\n                            maxLength: 12,\n                            onKeyDown: e => {if (e.key == 'Enter') document.activeElement.blur()},\n                        }}\n                        InputLabelProps={{\n                            className: classes.label,\n                        }}\n                    />\n                </Grid>\n            </Grid>\n        </div>\n    );\n}\n\nexport default NameInput","import React from 'react';\nimport { Typography, Divider, FormControl, Select, MenuItem, InputLabel, FormLabel, Slider, Grid, Switch, Button, ButtonGroup, FormControlLabel, Checkbox, RadioGroup, Radio, FormHelperText } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport PublicIcon from '@material-ui/icons/Public';\nimport LockIcon from '@material-ui/icons/Lock';\nimport showDialog from '../Dialog/show';\nimport socket from '../socket';\nimport defaultMatchOptions from './defaultMatchOptions.json';\nconst allowedPlayers = [1, 25];\nconst maxGamesAllowed = [1, 4];\n\nconst useStyles = makeStyles((theme) => ({\n    formControl: {\n        margin: theme.spacing(1),\n    },\n    select: {\n        width: 50,\n    },\n}));\n\nconst timerMarks = [\n    5,\n    8,\n    12,\n    15,\n    20,\n    25,\n    30,\n    45,\n    60,\n    120,\n    200,\n    300,\n];\nconst timerMarksFormat = n => `${timerMarks[n]}s`;\n\nvar options = {\n    ...defaultMatchOptions,\n    ...localStorage.MatchOptions ? JSON.parse(localStorage.MatchOptions) : {}\n};\n\nfunction NumberTweaker(props) {\n    return (\n        <ButtonGroup size=\"small\">\n            <Button onClick={() => props.fn(-10)} disabled={props.disabled || props.state == props.min}>- -</Button>\n            <Button onClick={() => props.fn(-1)} disabled={props.disabled || props.state == props.min}>-</Button>\n            <Button disabled>{props.state}</Button>\n            <Button onClick={() => props.fn(+1)} disabled={props.disabled || props.state == props.max}>+</Button>\n            <Button onClick={() => props.fn(+10)} disabled={props.disabled || props.state == props.max}>++</Button>\n        </ButtonGroup>\n    );\n}\n\nfunction MatchOptions(props) {\n    const classes = useStyles();\n\n    const sendUpdate = () => {\n        if (props.editable && props.started)\n            socket.emit('updateOptions', options);\n    }\n    const [publicity, setPublicity] = React.useState(options.public);\n    const handlePublicityChange = event => {\n        options.public = !publicity;\n        setPublicity(!publicity);\n        sendUpdate();\n    };\n    const [players, setPlayers] = React.useState(options.players);\n    const changePlayers = change => {\n        options.players += change;\n        if (options.players < allowedPlayers[0]) options.players = allowedPlayers[0];\n        if (options.players > allowedPlayers[1]) options.players = allowedPlayers[1];\n        setPlayers(options.players);\n        sendUpdate();\n    };\n    const [gameMax, setGameMax] = React.useState(options.gameMax);\n    const changeGameMax = change => {\n        options.gameMax += change;\n        if (options.gameMax < maxGamesAllowed[0]) options.gameMax = maxGamesAllowed[0];\n        if (options.gameMax > maxGamesAllowed[1]) options.gameMax = maxGamesAllowed[1];\n        setGameMax(options.gameMax);\n        sendUpdate();\n    };\n    const [lineLength, setLineLength] = React.useState(options.lineLength);\n    const changeLineLength = (event, value) => {\n        value = Number(value);\n        options.lineLength = value;\n        setLineLength(value);\n        if (columns < value)\n            changeColumns({target: {value}});\n        if (rows < value)\n            changeRows({target: {value}});\n        sendUpdate();\n    };\n    const [columns, setColumns] = React.useState(options.columns);\n    const changeColumns = event => {\n        options.columns = event.target.value;\n        setColumns(event.target.value);\n        sendUpdate();\n    };\n    const [rows, setRows] = React.useState(options.rows);\n    const changeRows = event => {\n        options.rows = event.target.value;\n        setRows(event.target.value);\n        sendUpdate();\n    };\n    const [turnTime, setTurnTime] = React.useState(timerMarks.indexOf(options.turnTime));\n    const handleTurnTimeChange = (event, value) => {\n        options.turnTime = timerMarks[value];\n        setTurnTime(value);\n        sendUpdate();\n    };\n    const [runDownTimer, setRunDownTimer] = React.useState(options.runDownTimer);\n    const handleRunDownTimerChange = event => {\n        options.runDownTimer = !runDownTimer;\n        setRunDownTimer(!runDownTimer);\n        sendUpdate();\n    };\n    const [nameConvention, setNameConvention] = React.useState(options.names);\n    const handleNameConventionChange = event => {\n        options.names = event.target.value;\n        setNameConvention(event.target.value);\n        sendUpdate();\n    };\n    \n    let updateOptions = () => {\n        setPublicity(options.public);\n        setPlayers(options.players);\n        setGameMax(options.gameMax);\n        setLineLength(options.lineLength);\n        setColumns(options.columns);\n        setRows(options.rows);\n        setTurnTime(timerMarks.indexOf(options.turnTime));\n        setRunDownTimer(options.runDownTimer);\n    };\n    React.useEffect(() => {\n        window.addEventListener('matchOptionsChanged', updateOptions);\n        return () => window.removeEventListener('matchOptionsChanged', updateOptions);\n    }, []);\n\n    return (\n        <div>\n            <Divider style={{marginTop: 16}} />\n\n            <FormControl className={classes.formControl}>\n                <FormLabel>Privacy</FormLabel>\n                <Typography component=\"div\">\n                    <Grid component=\"label\" container alignItems=\"center\" spacing={1}>\n                        <Grid item><LockIcon /></Grid>\n                        <Grid item>\n                            <Switch color=\"primary\" checked={publicity} onChange={handlePublicityChange} disabled={!props.editable} />\n                        </Grid>\n                        <Grid item><PublicIcon /></Grid>\n                    </Grid>\n                </Typography>\n\n                {props.started ? <Button color={props.editable ? 'primary' : 'disabled'} size=\"small\" onClick={() => socket.emit('newRoomCode')} disabled={!props.editable}>New room code</Button> : null}\n            </FormControl>\n\n            {props.started ? null : <span>\n                <Divider />\n                \n                <FormControl className={classes.formControl}>\n                    <FormLabel style={{marginBottom: 5}}>Max players</FormLabel>\n                    <NumberTweaker fn={changePlayers} min={allowedPlayers[0]} max={allowedPlayers[1]} state={players} disabled={!props.editable} />\n                </FormControl>\n            </span>}\n\n            <Divider />\n\n            <FormControl className={classes.formControl}>\n                <FormLabel style={{marginBottom: 5}}>Max games per player per colour</FormLabel>\n                <NumberTweaker fn={changeGameMax} min={maxGamesAllowed[0]} max={maxGamesAllowed[1]} state={gameMax} disabled={!props.editable} />\n            </FormControl>\n\n            <Divider />\n\n            <FormControl className={classes.formControl}>\n                <FormLabel>Row length to win</FormLabel>\n                <RadioGroup value={lineLength} onChange={changeLineLength} row>\n                    {[3, 4, 5, 6].map(n => <FormControlLabel value={n} key={n} control={<Radio color=\"primary\" disabled={!props.editable} />} label={n} />)}\n                </RadioGroup>\n            </FormControl>\n\n            <Divider />\n\n            <FormControl className={classes.formControl}>\n                <FormLabel>Board Size</FormLabel>\n            </FormControl>\n            <br />\n            <FormControl className={classes.formControl}>\n                <Select\n                    value={columns}\n                    onChange={changeColumns}\n                    displayEmpty\n                    className={classes.select}\n                    disabled={!props.editable}\n                >\n                    {[3, 4, 5, 6, 7, 8, 9, 10].filter(n => n >= lineLength).map(n => <MenuItem key={n} value={n}>{n}</MenuItem>)}\n                </Select>\n                <FormHelperText>Columns</FormHelperText>\n            </FormControl>\n            <span style={{\n                position: 'relative',\n                top: 10,\n                fontSize: 35,\n            }}>×</span>\n            <FormControl className={classes.formControl}>\n                <Select\n                    value={rows}\n                    onChange={changeRows}\n                    displayEmpty\n                    className={classes.select}\n                    disabled={!props.editable}\n                >\n                    {[3, 4, 5, 6, 7, 8, 9, 10].filter(n => n >= lineLength).map(n => <MenuItem key={n} value={n}>{n}</MenuItem>)}\n                </Select>\n                <FormHelperText>Rows</FormHelperText>\n            </FormControl>\n\n            {/*<FormControl className={classes.formControl}>\n                <InputLabel>Players</InputLabel>\n                <Select value={players} onChange={handlePlayersChange}>\n                    {[...Array(allowedPlayersMax+1).keys()].slice(allowedPlayersMin).map(i => <MenuItem value={i}>{i}</MenuItem>)}\n                </Select>\n            </FormControl>*/}\n\n            <Divider />\n\n            <FormControl className={classes.formControl} style={{minWidth: 300, paddingRight: 10}}>\n                <FormLabel>Turn time</FormLabel>\n                <Slider\n                    value={turnTime}\n                    onChange={handleTurnTimeChange}\n                    step={null}\n                    marks={[...timerMarks.keys()].map(n => ({value: n, label: String(timerMarks[n])}))}\n                    min={0}\n                    max={timerMarks.length-1}\n                    getAriaValueText={timerMarksFormat}\n                    valueLabelFormat={timerMarksFormat}\n                    valueLabelDisplay=\"auto\"\n                    disabled={!props.editable}\n                />\n            </FormControl>\n            \n            <Divider />\n\n            <FormControlLabel\n                control={<Checkbox color=\"primary\" checked={runDownTimer} onChange={handleRunDownTimerChange} disabled={!props.editable} />}\n                label=\"Always run down turn timer?\"\n                labelPlacement=\"start\"\n            />\n\n            <Divider />\n\n            <FormControl className={classes.formControl}>\n            <FormLabel>Naming convention</FormLabel>\n                <Select\n                    value={nameConvention}\n                    onChange={handleNameConventionChange}\n                    disabled={!props.editable}\n                >\n                    <MenuItem value={0}>Normal</MenuItem>\n                    <MenuItem value={1}>Gifted</MenuItem>\n                    <MenuItem value={2}>Random</MenuItem>\n                </Select>\n                <FormHelperText>{(() => ({\n                    0: 'Players use their chosen name',\n                    1: 'Players\\' chosen names are shuffled between them',\n                    2: 'Generates a silly name for each player',\n                }[nameConvention]))()}</FormHelperText>\n            </FormControl>\n        </div>\n    );\n}\n\nfunction changeOptions(newOptions) {\n    options = newOptions;\n    window.dispatchEvent(new Event('matchOptionsChanged'));\n}\n\nfunction hostChanged(amNowHost) {\n    if (dialog.state.open && dialog.editable != amNowHost)\n        showMatchOptions(amNowHost, true);\n}\n\nvar dialog = {\n    state: {\n        open: false,\n    }\n};\n\nasync function showMatchOptions(editable, started) {\n    let elem;\n\n    dialog = await showDialog({\n        ...(started ? {\n            title: 'Match options',\n            description: 'Current options (editable by the host):',\n        } : {\n            title: 'Create Match',\n            description: 'Match options:',\n            buttonText: 'Create',\n            buttonAction: () => {\n                dialog.handleClose();\n                localStorage.MatchOptions = JSON.stringify(options);\n                socket.emit('createMatch', options);\n            }\n        }),\n    }, <MatchOptions editable={editable} started={started} />);\n    dialog.editable = editable;\n}\n\nexport default {\n    showMatchOptions,\n    changeOptions,\n    hostChanged,\n};","import React from 'react';\nimport { Typography, Button, Divider, Link } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CodeInput from './CodeInput';\nimport NameInput from './NameInput';\nimport socket from '../socket';\nimport showMatchOptions from './showMatchOptions';\nimport showDialog from '../Dialog/show';\n\nconst useStyles = makeStyles({\n    logoImage: {\n        display: 'block',\n        textAlign: 'center',\n        margin: 'auto',\n        maxWidth: 350,\n    },\n\n    controls: {\n        textAlign: 'center',\n        border: '1px solid #ffffff1f',\n        borderRadius: 10,\n    },\n});\n\nfunction Home() {\n    const classes = useStyles();\n    let showTutorial = async () => {\n        let videoId = 'gU3dUQvGNcE';\n        let dialog = await showDialog({\n            layer: 'tutorial',\n            title: 'New to 8connect4?',\n            description: <span>Watch <Link href={`https://youtu.be/${videoId}`} target=\"_blank\" rel=\"noopener\">this short video</Link> for an explanation of 8connect4.</span>,\n            buttonText: 'Don\\'t show again',\n            buttonAction: () => {\n                dialog.handleClose();\n                localStorage.tutorialWatched = true\n            },\n        }, <iframe width=\"550\" height=\"300\" src={`https://www.youtube.com/embed/${videoId}`} frameBorder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowFullScreen></iframe>)\n    };\n    React.useEffect(() => {\n        if (!localStorage.hasOwnProperty('tutorialWatched'))\n            showTutorial();\n    }, []);\n\n    return (\n        <div>\n            <Typography className={classes.title} variant=\"h3\" gutterBottom><img className={classes.logoImage} src=\"/iconanimated.png\" alt=\"8connect4\" /></Typography>\n\n            <Typography variant=\"body1\" gutterBottom>\n                Play 8 games of connect 4 at once. <Link onClick={showTutorial}>Watch tutorial</Link>\n            </Typography>\n\n            <div className={classes.controls}>\n                <NameInput />\n\n                <Divider />\n                <br />\n\n                <Button size=\"large\" color=\"primary\" onClick={() => socket.emit('findMatch')}>Find Match</Button>\n                <br />\n                <Button size=\"small\" color=\"secondary\" onClick={() => showMatchOptions.showMatchOptions(true, false)}>Create Match</Button>\n\n                <br /><br /><br />\n\n                <CodeInput />\n            </div>\n        </div>\n    );\n}\n\nexport default Home;","import availableCounters from './availableCounters.json';\n\nexport default function getCounter(c, cosmetics) {\n    let imgName = `${c}${'x'.repeat(availableCounters.length)}`;\n    for (let i of availableCounters)\n        imgName = imgName.slice(0, i.char) + cosmetics[c][i.key] + imgName.slice(i.char+1);\n    return imgName;\n}","import React from 'react';\nimport { Typography } from '@material-ui/core';\nimport { ToggleButton, ToggleButtonGroup } from '@material-ui/lab';\nimport availableCounters from './availableCounters.json';\nimport socket from '../socket';\nimport getCounter from './getCounter';\n\nconst emptySelection = {};\nfor (let i of ['a', 'b']) {\n    emptySelection[i] = {\n        s: 0, //shape\n        c: 0, //colour\n        f: 0, //filled\n    }\n}\n\nfunction Cosmetics() {\n    const [selection, setSelection] = React.useState(localStorage.hasOwnProperty('cosmetics') ? JSON.parse(localStorage.cosmetics) : JSON.parse(JSON.stringify(emptySelection)));\n    let select = (a, p, s) => {\n        let newSelection = JSON.parse(JSON.stringify(selection));\n        newSelection[a][p] = s;\n        setSelection(newSelection);\n        socket.emit('cosmetics', newSelection);\n        localStorage.cosmetics = JSON.stringify(newSelection);\n    };\n\n    return (\n        <div>\n            {['a', 'b'].map(c => {\n                let imgName = getCounter(c, selection);\n                \n                return <div>\n                    <hr />\n                    {availableCounters.map(a => <div>\n                        <ToggleButtonGroup value={[selection[c][a.key]]}>{a.available.map(choice => <ToggleButton style={{padding: 2}} onClick={() => select(c, a.key, choice)} value={choice}>\n                            <img width={30} src={`/counters/${imgName.slice(0, a.char) + choice + imgName.slice(a.char+1)}.png`} />\n                        </ToggleButton>)}</ToggleButtonGroup>\n                    </div>)}\n                </div>;\n            })}\n        </div>\n    );\n}\n\nexport default Cosmetics;","import React from 'react';\nimport { Typography, Divider, Button, ButtonGroup, Tooltip, IconButton, Paper, TableContainer, Table, TableHead, TableBody, TableRow, TableCell, Popover } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport MeetingRoomIcon from '@material-ui/icons/MeetingRoom';\nimport PublicIcon from '@material-ui/icons/Public';\nimport LockIcon from '@material-ui/icons/Lock';\nimport StarsIcon from '@material-ui/icons/Stars';\nimport StarBorderIcon from '@material-ui/icons/StarBorder';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport LinkIcon from '@material-ui/icons/Link';\nimport EditIcon from '@material-ui/icons/Edit';\nimport socket from '../socket';\nimport copy from 'clipboard-copy';\nimport NameInput from '../Home/NameInput';\nimport Cosmetics from './Cosmetics';\nimport showDialog from '../Dialog/show';\nimport showMatchOptions from '../Home/showMatchOptions';\nimport getCounter from './getCounter';\n\nconst useStyles = makeStyles({\n    root: {\n        textAlign: 'center',\n    },\n\n    privacyIcon: {\n        marginRight: 10\n    },\n\n    table: {\n        width: 400,\n        margin: 'auto',\n    },\n\n    head: {\n        backgroundColor: 'black',\n    },\n\n    tableCell: {\n        textAlign: 'center',\n    },\n\n    you: {\n        color: 'red',\n        fontWeight: 'bold',\n    },\n\n    counterStyle: {\n        width: 20,\n        marginBottom: -5,\n    }\n});\n\nfunction Lobby(props) {\n    const classes = useStyles();\n\n    let tableBody = [];\n    let amHost = socket.id.startsWith(props.matchInfo.host);\n    for (let i = 0; i < props.matchInfo.options.players; i++) {\n        let content = '';\n        let you = false;\n        if (i in props.matchInfo.players) {\n            content = props.matchInfo.players[i].name;\n            you = socket.id.startsWith(props.matchInfo.players[i].id);\n        }\n        tableBody.push(\n            <TableRow key={i}>\n                <TableCell className={classes.tableCell}>\n                    {i in props.matchInfo.players && props.matchInfo.host == props.matchInfo.players[i].id ?\n                        <Tooltip title=\"This player is the host. They have the ability to start the game.\">\n                            <StarsIcon fontSize=\"inherit\" />\n                        </Tooltip>\n                    : null}\n                    {you ? <span className={classes.you}>{content}</span> : content}\n                    {i in props.matchInfo.players ? ['a', 'b'].map(c => <img className={classes.counterStyle} src={`/counters/${getCounter(c, props.matchInfo.players[i].cosmetics)}.png`} />) : null}\n                    {you ? <Tooltip title=\"Change your name\">\n                        <IconButton size=\"small\" onClick={() => showDialog({title: 'Customise'}, <div>\n                            <NameInput />\n                            <Cosmetics />\n                        </div>)}><EditIcon fontSize=\"inherit\" /></IconButton>\n                    </Tooltip> : null}\n                    {i in props.matchInfo.players && amHost && !props.matchInfo.starting && !you ? <span>\n                        <Tooltip title=\"Kick - remove this player from this lobby.\">\n                            <IconButton size=\"small\" onClick={() => socket.emit('kick', props.matchInfo.players[i].id)}><ClearIcon fontSize=\"inherit\" /></IconButton>\n                        </Tooltip>\n                        {!props.matchInfo.players[i].bot ? \n                            <Tooltip title=\"Promote - transfer your host privileges to this player.\" onClick={() => socket.emit('promote', props.matchInfo.players[i].id)}>\n                                <IconButton size=\"small\"><StarBorderIcon fontSize=\"inherit\" /></IconButton>\n                            </Tooltip>\n                        : null}\n                    </span> : null}\n                </TableCell>\n            </TableRow>\n        );\n    }\n\n    React.useEffect(() => {\n        showMatchOptions.hostChanged(amHost);\n    });\n\n    if (props.matchInfo.starting) {\n        (new Audio(`/countdown/${props.matchInfo.startTimer}.mp3`)).play();\n    }\n\n    let copyHelp = 'Copy a link others can use to join this lobby to your clipboard.';\n    let [copyTitle, setCopyTitle] = React.useState(copyHelp);\n\n    return (\n        <div>\n            <IconButton onClick={() => window.location.reload()}>\n                <MeetingRoomIcon />\n            </IconButton>\n            <div className={classes.root}>\n                <Typography variant=\"overline\" display=\"block\" gutterBottom>\n                    Room code\n                </Typography>\n                <Typography variant=\"h3\" gutterBottom>\n                    <span className={classes.privacyIcon}>\n                        {props.matchInfo.options.public ? <Tooltip title=\"This is a public match. Anyone can join this match from the 'Find Match' button on the homepage.\"><PublicIcon /></Tooltip> : <Tooltip title=\"This is a private match. Only people with the room code can join.\"><LockIcon /></Tooltip>}\n                    </span>\n                    {props.matchInfo.code}\n                    <Tooltip title={copyTitle}>\n                        <IconButton onClick={() => {\n                            copy(`${window.location.protocol}//${window.location.host}?${props.matchInfo.code}`);\n                            setCopyTitle('Copied to clipboard!');\n                            setTimeout(() => {\n                                setCopyTitle(copyHelp);\n                            }, 3000);\n                        }}><LinkIcon /></IconButton>\n                    </Tooltip>\n                </Typography>\n\n                <Button color=\"secondary\" onClick={() => showMatchOptions.showMatchOptions(amHost, true)}>Match options</Button>\n                <br /><br />\n                {props.matchInfo.starting ?\n                    <Typography variant=\"h4\">Starting in {props.matchInfo.startTimer}...</Typography>\n                :\n                    <Tooltip title={amHost ? 'Begin a timer to start the match. No more players will be able to join.' : 'Only the host can start the match.'}>\n                        <span>\n                            <Button color={amHost ? 'primary' : 'default'} size=\"large\" onClick={() => socket.emit('startMatch')} disabled={!amHost}>Start Match</Button>\n                        </span>\n                    </Tooltip>\n                }\n\n                <TableContainer component={Paper}>\n                    <Table>\n                        <TableHead>\n                            <TableRow className={classes.head}>\n                                <TableCell className={classes.tableCell}>\n                                    Players: {props.matchInfo.players.length}/{props.matchInfo.options.players}\n                                    {(() => {\n                                        \n                                        const [anchorEl, setAnchorEl] = React.useState(null);\n\n                                        const handleClick = (event) => {\n                                            setAnchorEl(event.currentTarget);\n                                        };\n\n                                        const handleClose = () => {\n                                            setAnchorEl(null);\n                                        };\n\n                                        const open = Boolean(anchorEl);\n\n                                        return (\n                                            <span>\n                                                {amHost ? <span>\n                                                    <Tooltip title=\"Add bot\">\n                                                        <IconButton size=\"small\" onClick={handleClick}>🤖</IconButton>\n                                                    </Tooltip>\n                                                    <Popover\n                                                        open={open}\n                                                        anchorEl={anchorEl}\n                                                        onClose={handleClose}\n                                                        anchorOrigin={{\n                                                            vertical: 'bottom',\n                                                            horizontal: 'center',\n                                                        }}\n                                                        transformOrigin={{\n                                                            vertical: 'top',\n                                                            horizontal: 'center',\n                                                        }}\n                                                    >\n                                                        <ButtonGroup variant=\"text\" color=\"default\" aria-label=\"text primary button group\">\n                                                            {['Easy', 'Medium', 'Hard'].map((diff, index) => <Button onClick={() => socket.emit('bot', index)}>{diff}</Button>)}\n                                                        </ButtonGroup>\n                                                    </Popover>\n                                                </span> : null}\n                                            </span>\n                                        );\n                                    })()}\n                                </TableCell>\n                            </TableRow>\n                        </TableHead>\n                        <TableBody>\n                            {tableBody}\n                        </TableBody>\n                    </Table>\n                </TableContainer>\n            </div>\n        </div>\n    );\n}\n\nexport default Lobby;","import React from 'react';\nimport { Typography, Divider } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport './index.css';\nimport getCounter from '../Lobby/getCounter.js';\n\nconst useStyles = makeStyles({\n    gameInfo: {\n        display: 'flex',\n        width: '100%',\n        marginBottom: 20,\n        margin: 'auto',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        position: 'sticky',\n        top: 0,\n        backgroundColor: 'black',\n        borderBottom: '1px solid #ffffff1f',\n        zIndex: 100,\n        '& div': {\n            flexGrow: 1,\n        },\n    },\n\n    gameInfoTitle: {\n        textAlign: 'center',\n    },\n\n    gameInfoContent: {\n        display: 'flex',\n        alignItems: 'end',\n        justifyContent: 'center',\n        /*textAlign: 'center',\n        '& *': {\n            display: 'inline',\n        },*/\n    },\n\n    title: {\n        textAlign: 'center',\n    },\n\n    colourIndicator: {\n        height: 49,\n    },\n\n    playerArea: {\n        paddingTop: 8,\n        paddingBottom: 8,\n        marginBottom: 16,\n        textAlign: 'center',\n        border: '1px solid #ffffff1f',\n        borderRadius: 10,\n    },\n\n    selfGameImage: {\n        maxWidth: 125,\n        maxHeight: 125,\n        width: 'auto',\n        height: 'auto',\n    },\n\n    otherGameImage: {\n        maxWidth: 100,\n        maxHeight: 100,\n        width: 'auto',\n        height: 'auto',\n    },\n\n    playingGamesContainer: {\n    },\n\n    playingGames: {\n        display: 'flex',\n        maxWidth: 600,\n        margin: 'auto',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        flexWrap: 'wrap',\n    },\n\n    otherGamesContainer: {\n        display: 'flex',\n        width: '100%',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        flexWrap: 'wrap',\n    },\n\n    otherGames: {\n        display: 'flex',\n        maxWidth: 600,\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        flexWrap: 'wrap',\n    },\n\n    vsMe: {\n        color: 'red',\n    }\n});\n\nfunction GameImage(props) {\n    const classes = useStyles();\n    let colour = Object.keys(props.game.playerIDs).find(c => props.playerId.startsWith(props.game.playerIDs[c]));\n    let opponent = props.players.find(player => player.id.startsWith(props.game.playerIDs[colour == 'a' ? 'b' : 'a']));// props.players.find(player => player.id.startsWith(Object.values(props.game.playerIDs).find(player => !props.playerId.startsWith(player))));\n\n    return (\n        <div>\n            <img data-playercolour={props.playerColour} className={`${props.self ? 'self-game ' : ''}${props.self ? classes.selfGameImage : classes.otherGameImage} ${props.self && props.games.length == 1 && props.playerColour == 'b' ? 'game-b' : `game-${colour}`} game${props.game.id}`} />\n            <Typography variant=\"caption\" display=\"block\">\n                Game {props.game.name} vs {props.myId.startsWith(opponent.id) ? <span className={classes.vsMe}>{opponent.name}</span> : opponent.name}\n            </Typography>\n        </div>\n    );\n}\n\nconst turnTakenIndicatorSize = 13;\nfunction TurnTakenIndicator(props) {\n    return (\n        <svg height={props.size} width={props.size}>\n            <circle id={`playerTurnIndicator-${props.player}`} cx={props.size/2} cy={props.size/2} r={props.size/2} fill=\"red\" />\n        </svg>\n    );\n}\n\nfunction PlayerGames(props) {\n    const classes = useStyles();\n    let gameRowClass = props.self ? classes.playingGames : classes.otherGames;\n\n    return (\n        <div className={classes.playerArea}>\n            {\n                props.self\n                ?\n                <div>\n                    <Typography variant=\"h4\">{props.player.name} <TurnTakenIndicator size={23} player={props.player.id.slice(0, 6)} /></Typography>\n                    <Divider />\n                </div>\n                :\n                <Typography variant=\"h6\" gutterBottom>{props.player.name} <TurnTakenIndicator size={14} player={props.player.id} /></Typography>\n            }\n            <div className={props.self ? classes.playingGamesContainer : classes.otherGamesContainer}>\n                <div className={gameRowClass}>\n                    {props.self ? <img className={`${classes.colourIndicator} colour-indicator-a`} src={`/counters/${getCounter('a', props.player.cosmetics)}.png`} /> : null}\n                    {props.games.filter(game => props.player.id.startsWith(game.playerIDs.a)).map(game => <GameImage self={props.self} game={game} games={props.games} players={props.players} playerColour={'a'} playerId={props.player.id} myId={props.myId} />)}\n                    {props.self ? null : <img className={`${classes.colourIndicator} colour-indicator-a`} src={`/counters/${getCounter('a', props.player.cosmetics)}.png`} />}\n                </div>\n                {props.self ? <div id=\"controller\" className={classes.controls} /> : null}\n                <div className={gameRowClass}>\n                    <img className={`${classes.colourIndicator} colour-indicator-b`} src={`/counters/${getCounter('b', props.player.cosmetics)}.png`} />\n                    {props.games.filter(game => props.player.id.startsWith(game.playerIDs.b)).map(game => <GameImage self={props.self} game={game} games={props.games} players={props.players} playerColour={'b'} playerId={props.player.id} myId={props.myId} />)}\n                </div>\n            </div>\n        </div>\n    );\n}\n\nfunction Match(props) {\n    const classes = useStyles();\n    let selfPlayer = props.players.find(player => props.myId.startsWith(player.id));\n\n    return (\n        <div>\n            <div className={classes.gameInfo}>\n                <div>\n                    <div className={classes.gameInfoTitle}>\n                        <Typography variant=\"subtitle1\">\n                            Ongoing games\n                        </Typography>\n                    </div>\n                    <div className={classes.gameInfoContent}>\n                        <Typography variant=\"h3\">\n                            <span id=\"gamesLeft\">0</span>\n                        </Typography>\n                        <Typography variant=\"h5\">\n                            /<span id=\"maxGames\">0</span>\n                        </Typography>\n                    </div>\n                </div>\n\n                <div>\n                    <div className={classes.gameInfoTitle}>\n                        <Typography variant=\"subtitle1\">\n                            Turn time left\n                        </Typography>\n                    </div>\n                    <div className={classes.gameInfoContent}>\n                        <Typography variant=\"h3\">\n                            <span id=\"turnTime\">0</span>\n                        </Typography>\n                    </div>\n                </div>\n\n                <div>\n                    <div className={classes.gameInfoTitle}>\n                        <Typography variant=\"subtitle1\">\n                            Turn\n                        </Typography>\n                    </div>\n                    <div className={classes.gameInfoContent}>\n                        <Typography variant=\"h3\">\n                            <img height=\"35\" id=\"turnIndicator\" />\n                            <span id=\"turnNumber\">0</span>\n                        </Typography>\n                    </div>\n                </div>\n            </div>\n\n            <div>\n                <Typography variant=\"h2\" style={{textAlign: 'center'}}>{props.games.filter(game => props.players[0].id.startsWith(game.playerIDs.a)).length+props.games.filter(game => props.players[0].id.startsWith(game.playerIDs.b)).length}connect{props.matchInfo.options.lineLength}</Typography>\n                <PlayerGames player={selfPlayer} players={props.players} games={props.games} self={true} myId={props.myId} />\n                {props.players.filter(player => !props.myId.startsWith(player.id)).map(player => (\n                    <PlayerGames player={player} players={props.players} games={props.games} self={false} myId={props.myId} />\n                ))}\n            </div>\n        </div>\n    );\n}\n\nexport default Match;","import React from 'react';\nimport { Typography, Tooltip, IconButton, Paper, TableContainer, Table, TableHead, TableBody, TableRow, TableCell, Button, Divider } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport HomeIcon from '@material-ui/icons/Home';\nimport socket from '../socket/';\n//import { gameNameChars } from '../Match/gameplay';\nimport getCounter from '../Lobby/getCounter.js';\n\nconst useStyles = makeStyles({\n    root: {\n        textAlign: 'center',\n    },\n\n    tableCell: {\n        textAlign: 'center',\n    },\n\n    gamesContainer: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        justifyContent: 'center',\n        '& div': {\n            marginLeft: 25,\n            marginRight: 25,\n        },\n    },\n\n    gameImage: {\n        width: 150,\n    },\n\n    counterImage: {\n        height: 10,\n    },\n\n    you: {\n        color: 'red',\n    },\n\n    otherPlayer: {\n    },\n});\n\nfunction Results(props) {\n    const classes = useStyles();\n\n    let playerClass = player => {\n        return props.myId.startsWith(player.id) ? classes.you : classes.otherPlayer;\n    }\n\n    let winnersStop = 0;\n    for (let i = 1; i < props.results.length; i++) {\n        if (props.results[i].score == props.results[0].score)\n            winnersStop = i;\n        else\n            break;\n    }\n\n    (new Audio('/endMatch.mp3')).play();\n\n    return (\n        <div>\n            <div className={classes.root}>\n                <IconButton onClick={() => window.location.reload()}>\n                    <HomeIcon />\n                </IconButton>\n\n                <Typography variant=\"h2\">\n                    Winner{winnersStop == 0 ? '' : 's'}:\n                </Typography>\n                <Typography variant=\"h4\" gutterBottom>\n                    {props.results.slice(0, winnersStop+1).map(player => player.name).join(', ')}\n                </Typography>\n\n                <TableContainer component={Paper}>\n                    <Table>\n                        <TableBody>\n                            {props.results.map(player => (\n                                <TableRow>\n                                    <TableCell className={classes.tableCell}>\n                                        {player.placement}. {props.myId.startsWith(player.id) ? <span className={classes.you}>{player.name}</span> : player.name} with a score of {player.score}.\n                                    </TableCell>\n                                </TableRow>\n                            ))}\n                        </TableBody>\n                    </Table>\n                </TableContainer>\n\n                <Button color=\"primary\" size=\"large\" style={{margin: '16px 0'}} onClick={() => socket.emit('rejoin', props.rjCode, props.matchInfo.options)}>Play again</Button>\n\n                <Divider/>\n\n                <Typography variant=\"h3\">\n                    Games\n                </Typography>\n                <div className={classes.gamesContainer}>\n                    {props.games.map(game => (\n                        <div>\n                            <img src={game.src} className={classes.gameImage} />\n                            <Typography variant=\"caption\" display=\"block\">\n                                Game {game.name}\n                                <br />\n                                <span className={playerClass(game.players.a)}>{game.players.a.name}</span> <img className={classes.counterImage} src={`/counters/${getCounter('a', game.players.a.cosmetics)}.png`} /> vs <img className={classes.counterImage} src={`/counters/${getCounter('b', game.players.b.cosmetics)}.png`} /> <span className={playerClass(game.players.b)}>{game.players.b.name}</span>\n                                {/*<br />\n                                {game.outcome == false ? 'Draw' : <span>Winner: <img className={classes.counterImage} src={`/${game.outcome}.png`} /></span>}*/}\n                            </Typography>\n                        </div>\n                    ))}\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Results;","import availableCounters from '../Lobby/availableCounters.json';\n\nconst images = {\n    counters: {},\n    a: new Image(),\n    b: new Image(),\n    hover: {},\n    outcomeOverlay: {}\n};\n\nfor (let i of ['a', 'b']) {\n    images.hover[i] = [];\n    for (let j of availableCounters.find(a => a.key == 'c').available) {\n        let src = `/${i}.png`;\n        images.hover[i].push(new Image());\n        images.hover[i][images.hover[i].length - 1].src = `/hover_${i}${j}.png`;\n    }\n    images.counters[i] = [];\n    for (let j of availableCounters[0].available) {\n        let jA = []\n        for (let k of availableCounters[1].available) {\n            let kA = []\n            for (let l of availableCounters[2].available) {\n                let img = new Image();\n                img.src = `/counters/${i}${k}${j}${l}.png`;\n                kA.push(img);\n            }\n            jA.push(kA)\n        }\n        images.counters[i].push(jA);\n    }\n}\n\nfor (let i of ['win', 'loss', 'draw', 'end']) {\n    let img = new Image();\n    img.src = `/outcome/${i}.png`;\n    images.outcomeOverlay[i] = img;\n}\n\nexport default images;","function getRandomInt(n) {\n    return Math.floor(Math.random() * n);\n}\n\nfunction shuffleString(s) {\n    let arr = s.split('');\n    let n = arr.length;\n\n    for(let i=0 ; i<n-1 ; ++i) {\n        let j = getRandomInt(n);\n        \n        let temp = arr[i];\n        arr[i] = arr[j];\n        arr[j] = temp;\n    }\n\n    s = arr.join('');\n    return s;\n}\n\nexport default shuffleString;","import socket from '../socket';\n\nvar images;\n\nconst boxSize = 100;\nconst gridlineSize = 4;\nvar boardWidth = 7;\n\nvar canvas = document.createElement('canvas');\ncanvas.width = ((gridlineSize + boxSize) * boardWidth) + gridlineSize;\ncanvas.height = boxSize + (gridlineSize * 2);\nvar ctx = canvas.getContext('2d');\n\nvar slot = null;\nvar turn = 'a';\n\nfunction setImages(newImages) {\n    images = newImages;\n}\n\nfunction turnChange(newTurn) {\n    turn = newTurn;\n    slot = null;\n    render();\n}\n\nfunction setupController(matchInfo, newImages) {\n    images = newImages;\n    boardWidth = matchInfo.columns;\n    canvas.width = ((gridlineSize + boxSize) * boardWidth) + gridlineSize;\n}\n\nfunction render(event = null) {\n    ctx.clearRect(0, 0, canvas.width, canvas.height); //clear canvas\n    ctx.fillStyle = 'white';\n\n    for (let i = 0; i < boardWidth + 1; i++)\n        ctx.fillRect((boxSize+gridlineSize)*i, 0, gridlineSize, canvas.height);\n    for (let i = 0; i < 2; i++)\n        ctx.fillRect(0, (boxSize+gridlineSize)*i, canvas.width, gridlineSize);\n\n    if (event != null) {\n        if (event.type.startsWith('touch'))\n            event = event.changedTouches[0];\n        let bbox = event.target.getBoundingClientRect();\n        let x = (event.clientX - bbox.left - gridlineSize) * (canvas.width / bbox.width);\n        let y = (event.clientY - bbox.top - gridlineSize) * (canvas.height / bbox.height);\n        if (x < 0 || y < 0) return;\n\n        if (y >= boxSize) return;\n        if (x%(boxSize+gridlineSize) >= boxSize) return;\n\n        let newSlot = Math.floor(x/(boxSize+gridlineSize));\n        if (slot != newSlot) {\n            slot = newSlot;\n            socket.emit('hover', slot);\n        }\n    }\n\n    if (slot != null) {\n        let image = images[turn];\n        if (image.complete)\n            ctx.drawImage(image, gridlineSize+((boxSize+gridlineSize)*slot), gridlineSize, boxSize, boxSize);\n    }\n}\n\nfunction move() {\n    socket.emit('move', turn, slot);\n    slot = null;\n    socket.emit('hover', slot);\n    render();\n}\n\nrender();\ncanvas.addEventListener('mousemove', render);\ncanvas.addEventListener('touchstart', render);\ncanvas.addEventListener('touchmove', render);\ncanvas.addEventListener('touchend', move);\ncanvas.addEventListener('mousedown', move);\n\nexport {\n    canvas,\n    setImages,\n    setupController,\n    turnChange,\n};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport theme from '../theme';\nimport { CssBaseline } from '@material-ui/core';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport Match from './';\nimport Results from '../Results';\nimport shuffleString from './shuffleString';\nimport images from './images';\nimport * as controller from './controller';\n\nconst boxSize = 50;\nconst gridlineSize = 4;\nconst gameNameChars = '123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';\nconst placeAudio = new Audio('/place.mp3');\nconst otherPlaceAudio = new Audio('/otherPlace.mp3');\nconst gameEndAudio = new Audio('/endGame.mp3');\nconst startTurnAudio = new Audio('/startTurn.mp3');\n\n\nvar matchInfo;\nvar myId;\nvar games = [];\nvar gamesLeft;\nvar intervals = [];\nvar turnNumber = 0;\nvar turn = 'a';\nvar turnTimerEnd = Date.now();\n\nvar canvas = document.createElement('canvas');\nvar ctx = canvas.getContext('2d');\n\nfunction showTimer() {\n    let timeLeft = (turnTimerEnd - Date.now()) / 1000;\n    if (timeLeft < 0)\n        timeLeft = 0;\n    document.getElementById('turnTime').innerHTML = timeLeft.toFixed(2);\n}\n\nfunction playMatch(startingMatchInfo, sentId) {\n    myId = sentId;\n    matchInfo = startingMatchInfo;\n    canvas.width = (boxSize * matchInfo.columns) + ((matchInfo.columns + 1) * gridlineSize);\n    canvas.height = (boxSize + gridlineSize) * (matchInfo.rows + 1);\n    ctx.font = `30px Roboto`;\n    ctx.textAlign = \"center\";\n    ctx.textBaseline = \"middle\";\n    turnNumber = 0;\n    for (let i in startingMatchInfo.games) {\n        let game = startingMatchInfo.games[i];\n        let state = [];\n        for (let y = 0; y < matchInfo.rows; y++) {\n            let column = [];\n            for (let x = 0; x < matchInfo.columns; x++) {\n                column.push(null);\n            }\n            state.push(column);\n        }\n\n        games.push({\n            id: i,\n            name: (i+1 > gameNameChars.length ? `${gameNameChars[~~(i/gameNameChars.length)]}${gameNameChars[i%gameNameChars.length]}` : gameNameChars[i]),\n            playerIDs: game.players,\n            players: Object.fromEntries(Object.keys(game.players).map(i => [i, matchInfo.players.find(player => player.id == game.players[i])])),\n            state: state,\n            order: JSON.parse(JSON.stringify(state)),\n        });\n    }\n    gamesLeft = games.length;\n    ReactDOM.render(<ThemeProvider theme={theme}><CssBaseline /><Match matchInfo={matchInfo} players={startingMatchInfo.players} games={games} myId={myId} /></ThemeProvider>, document.getElementById('root'), () => {\n        controller.setupController(startingMatchInfo, Object.fromEntries(['a', 'b'].map(c => [c, getImage(games.find(g => myId.startsWith(g.playerIDs[c])), c)])));\n        document.getElementById('controller').appendChild(controller.canvas);\n        controller.canvas.style.touchAction = 'none';\n        document.getElementById('maxGames').innerHTML = gamesLeft;\n        document.getElementById('gamesLeft').innerHTML = gamesLeft;\n        for (let i in games)\n            drawBoardsOfId(i);\n        intervals.timer = setInterval(showTimer, 1000/24);\n        (new Audio('/startMatch.mp3')).play();\n    });\n}\n\nfunction switchTurn(newTurn) {\n    document.getElementById('turnNumber').innerHTML = ++turnNumber;\n    turn = newTurn;\n    turnTimerEnd = Date.now() + matchInfo.turnTime;\n    for (let element of [...document.getElementsByClassName(`game-${turn == 'a' ? 'b' : 'a'}`), ...document.getElementsByClassName(`colour-indicator-${turn == 'a' ? 'b' : 'a'}`)])\n        element.classList.add('inactive-game');\n    for (let element of [...document.getElementsByClassName(`game-${turn}`), ...document.getElementsByClassName(`colour-indicator-${turn}`)])\n        element.classList.remove('inactive-game');\n    setTimeout(() => {\n        for (let element of [...document.getElementsByClassName(`game-${turn == 'a' ? 'b' : 'a'}`), ...document.getElementsByClassName(`colour-indicator-${turn == 'a' ? 'b' : 'a'}`)])\n            element.classList.add('inactive-game');\n        for (let element of [...document.getElementsByClassName(`game-${turn}`), ...document.getElementsByClassName(`colour-indicator-${turn}`)])\n            element.classList.remove('inactive-game');\n    }, 50);\n    for (let game of games) {\n        game.hover = null;\n    }\n    document.getElementById('turnIndicator').src = `/${turn}.png`;\n    controller.turnChange(turn);\n    if (turnNumber > 1)\n        startTurnAudio.play();\n}\n\nfunction hover(gameId, colour, column) {\n    if (colour == turn)\n        games[gameId].hover = column;\n    drawBoardsOfId(gameId);\n}\n\nfunction move(gameId, colour, column, row) {\n    let game = games[gameId];\n    game.state[column][row] = colour;\n    game.order[column][row] = turnNumber;\n    game.hover = null;\n    drawBoardsOfId(gameId);\n    if (!myId.startsWith(game.players[colour].id))\n        otherPlaceAudio.play();\n}\n\nfunction takenTurn(colour) {\n    placeAudio.play();\n    if (colour == turn) {\n        for (let i of document.querySelectorAll(`.self-game.game-${colour}`))\n            i.classList.add('inactive-game');\n    }\n}\n\nfunction drawCounter(image, column, row) {\n    if (image.complete)\n        ctx.drawImage(image, ((boxSize+gridlineSize)*Number(column))+gridlineSize, (boxSize+gridlineSize)*(Number(row)+1), boxSize, boxSize);\n}\n\nfunction checkLine(state, r, c, rD, cD) {\n    let toCheck = state[r][c];\n    if (toCheck === null) return null;\n    let checking = [];\n    for (let i = 1; i < matchInfo.lineLength; i++)\n        checking.push([r + (i * rD), c + (i * cD)]);\n    if (checking.every(t => state[t[0]][t[1]] === toCheck))\n        return [[r, c], ...checking];\n    else\n        return null;\n}\n\nfunction getImage(game, colour) {\n    let c = game.players[colour].cosmetics[colour];\n    return images.counters[colour][c.c][c.s][c.f];\n}\n\nconst highlightColours = {a: ['f58600', 'ff0010', 'ffd700', 'ff1a96'], b: ['03ffff', '2415ff', '00ff00', '0fff7d']};\nfunction drawBoard(game, overlayImage = null, isDraw = false, showOrder = false) {\n    ctx.clearRect(0, 0, canvas.width, canvas.height); //clear canvas\n\n    //draw gridlines\n    ctx.fillStyle = 'white';\n    for (let i = 0; i <= matchInfo.rows; i++)\n        ctx.fillRect(0, boxSize+((boxSize+gridlineSize)*i), canvas.width, gridlineSize);\n    for (let i = 0; i <= matchInfo.columns; i++)\n        ctx.fillRect((boxSize+gridlineSize)*i, boxSize, gridlineSize, canvas.height-boxSize);\n\n    for (let i in game.state)\n        for (let j in game.state[i]) {\n            let piece = game.state[i][j];\n            if (piece != null) {\n                drawCounter(getImage(game, piece), j, i);\n                if (showOrder) {\n                    ctx.fillStyle = 'white';\n                    ctx.fillText(String(game.order[i][j]), ((boxSize+gridlineSize)*Number(j))+gridlineSize+(boxSize/2), (boxSize+gridlineSize)*(Number(i)+1)+(boxSize/2)+3);\n                }\n            }\n        }\n    \n    if (game.hover !== null) {\n\n        drawCounter(getImage(game, turn), game.hover, -1); //draw counter above board\n\n        //draw counter inside board\n        let row = null;       \n        for (let i = 0; i < matchInfo.rows; i++) {\n            if (game.state[i][game.hover] != null) {\n                row = i - 1;\n                break;\n            }\n        }\n        if (row == -1) //if the top slot was full\n            row = false; //skip this turn\n        if (row == null) //if all the slots were empty\n            row = matchInfo.rows - 1; //use the bottom slot\n        if (row !== false) {\n            if (images.hover[turn][game.players[turn].cosmetics[turn].c].complete) {\n                ctx.globalAlpha = 0.15;\n                ctx.drawImage(images.hover[turn][game.players[turn].cosmetics[turn].c], ((boxSize+gridlineSize)*Number(game.hover))+gridlineSize, boxSize+gridlineSize, boxSize, (boxSize+gridlineSize)*(Number(row)+1)-gridlineSize);\n            }\n            ctx.globalAlpha = 0.5;\n            drawCounter(getImage(game, turn), game.hover, row);\n            ctx.globalAlpha = 1; //reset alpha\n        }\n        \n\n    }\n\n    if (!isDraw) {\n        let winner;\n        let winLocation = [];\n\n        //Check down\n        for (let r = 0; r <= matchInfo.rows - matchInfo.lineLength; r++)\n            for (let c = 0; c < matchInfo.columns; c++) {\n                let tiles = checkLine(game.state, r, c, 1, 0);\n                if (tiles != null) {\n                    winner = game.state[r][c];\n                    winLocation = winLocation.concat(tiles);\n                }\n            }\n    \n        //Check right\n        for (let r = 0; r < matchInfo.rows; r++)\n            for (let c = 0; c <= matchInfo.columns - matchInfo.lineLength; c++) {\n                let tiles = checkLine(game.state, r, c, 0, 1);\n                if (tiles != null) {\n                    winner = game.state[r][c];\n                    winLocation = winLocation.concat(tiles);\n                }\n            }\n    \n        //Check down-right\n        for (let r = 0; r <= matchInfo.rows - matchInfo.lineLength; r++)\n            for (let c = 0; c <= matchInfo.columns - matchInfo.lineLength; c++) {\n                let tiles = checkLine(game.state, r, c, 1, 1);\n                if (tiles != null) {\n                    winner = game.state[r][c];\n                    winLocation = winLocation.concat(tiles);\n                }\n            }\n    \n        //Check down-left\n        for (let r = matchInfo.rows - (matchInfo.rows - matchInfo.lineLength + 1); r < matchInfo.rows; r++)\n            for (let c = 0; c <= matchInfo.columns - matchInfo.lineLength; c++) {\n                let tiles = checkLine(game.state, r, c, -1, 1);\n                if (tiles != null) {\n                    winner = game.state[r][c];\n                    winLocation = winLocation.concat(tiles);\n                }\n            }\n        let squaresDone = [];\n        for (let i of winLocation) {\n            if (!squaresDone.some(square => JSON.stringify(square) == JSON.stringify(i))) {\n                squaresDone.push(i);\n                ctx.fillStyle = '#' + highlightColours[winner][game.players[winner].cosmetics[winner].c] + 'af';\n                ctx.fillRect(\n                    ((boxSize+gridlineSize)*i[1])+gridlineSize,\n                    (boxSize+gridlineSize)*(i[0]+1),\n                    boxSize, boxSize\n                );\n            }\n        }\n        /*ctx.lineWidth = 5;\n        ctx.beginPath();\n        ctx.moveTo(((boxSize+gridlineSize)*Number(winLocation[1]))+gridlineSize, (boxSize+gridlineSize)*(Number(winLocation[0])+1));\n        ctx.lineTo(((boxSize+gridlineSize)*Number(winLocation[3]))+gridlineSize, (boxSize+gridlineSize)*(Number(winLocation[2])+1));\n        ctx.stroke();*/\n    }\n\n    if (overlayImage != null && overlayImage.complete) {\n        ctx.globalAlpha = 0.75;\n        //draw grey \"window\"\n        ctx.fillStyle = '#6060607B';\n        ctx.fillRect(gridlineSize, boxSize+gridlineSize, ((boxSize+gridlineSize)*matchInfo.columns)-gridlineSize, ((boxSize+gridlineSize)*matchInfo.rows)-gridlineSize);\n        //draw black border\n        ctx.fillStyle = 'black';\n        ctx.fillRect(0, boxSize, canvas.width, gridlineSize); //top border\n        ctx.fillRect(0, canvas.height-gridlineSize, canvas.width, gridlineSize); //bottom border\n        ctx.fillRect(0, boxSize+gridlineSize, gridlineSize, canvas.height - boxSize - gridlineSize * 2); //left border\n        ctx.fillRect(canvas.width-gridlineSize, boxSize+gridlineSize, gridlineSize, canvas.height - boxSize - gridlineSize * 2); //right border\n        //draw icon\n        let wrh = overlayImage.width / overlayImage.height;\n        let newWidth = canvas.width - (gridlineSize * 2);\n        let newHeight = newWidth / wrh;\n        if (newHeight > canvas.height) {\n            newHeight = canvas.height - (boxSize + (gridlineSize * 2));\n            newWidth = newHeight * wrh;\n        }\n        let xOffset = newWidth < canvas.width ? ((canvas.width - newWidth) / 2) : 0;\n        let yOffset = newHeight < canvas.height ? ((canvas.height + boxSize - newHeight) / 2) : 0;\n\n        ctx.drawImage(overlayImage, xOffset, yOffset, newWidth, newHeight);\n        //\n        //ctx.drawImage(overlayImage, 0, 0, canvas.width, canvas.height);\n        //reset\n        ctx.globalAlpha = 1;\n        ctx.setTransform(1,0,0,1,0,0);\n    }\n    \n    return canvas.toDataURL();\n}\n\nfunction drawBoardsOfId(id) {\n    let board = drawBoard(games[id]);\n    for (let i of document.getElementsByClassName(`game${id}`))\n        i.src = board;\n}\n\nfunction outcomeDecided(boardId, outcome) {\n    document.getElementById('gamesLeft').innerHTML = --gamesLeft;\n    games[boardId].outcome = outcome;\n\n    for (let i of document.getElementsByClassName(`game${boardId}`)) {\n        i.classList.add('game-outcome-decided');\n        let relativeOutcome;\n        let glowColor;\n        if (outcome == false) {\n            relativeOutcome = 'draw';\n            glowColor = 'red';\n        } else if (outcome == i.getAttribute('data-playercolour')) {\n            relativeOutcome = 'win';\n            glowColor = 'green';\n        } else {\n            relativeOutcome = 'loss';\n            glowColor = 'grey';\n        }\n        i.src = drawBoard(games[boardId], images.outcomeOverlay[relativeOutcome], outcome == false);\n    }\n\n    gameEndAudio.play();\n}\n\nfunction endMatch(results, rjCode) {\n    for (let i in intervals) {\n        clearInterval(intervals[i]);\n        delete intervals[i];\n    }\n\n    for (let game of games) {\n        game.src = drawBoard(game, null, game.outcome == false, true);\n    }\n    games.sort((a, b) => gameNameChars.indexOf(a.name) - gameNameChars.indexOf(b.name));\n\n    ReactDOM.render(<ThemeProvider theme={theme}><CssBaseline /><Results myId={myId} results={results} matchInfo={matchInfo} games={games} rjCode={rjCode} /></ThemeProvider>, document.getElementById('root'));\n\n    matchInfo = null;\n    games = [];\n    intervals = [];\n}\n\nfunction turnStatus(player, status) {\n    document.getElementById(`playerTurnIndicator-${player}`).setAttribute('fill', status ? 'green' : 'red');\n}\n\nexport {\n    playMatch,\n    hover,\n    move,\n    takenTurn,\n    drawBoard,\n    switchTurn,\n    outcomeDecided,\n    endMatch,\n    turnStatus,\n};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport theme from '../theme';\nimport { CssBaseline } from '@material-ui/core';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport socketIOClient from 'socket.io-client';\nimport serverLocation from './server.json';\nimport showDialog from '../Dialog/show';\nimport Connecting from './Connect/ing';\nimport ConnectFailed from './Connect/Failed';\nimport Home from '../Home';\nimport Lobby from '../Lobby';\nimport * as gameplay from '../Match/gameplay';\nimport defaultMatchOptions from '../Home/defaultMatchOptions.json';\nimport showMatchOptions from '../Home/showMatchOptions';\n\nvar socket = socketIOClient(serverLocation, {\n    transports: ['websocket'],\n});\nvar connectedOnce = false;\n\nReactDOM.render(<ThemeProvider theme={theme}><CssBaseline /><Connecting /></ThemeProvider>, document.getElementById('root'));\n\nsocket.on('connect', () => {\n    if (!connectedOnce) {\n        connectedOnce = true;\n        ReactDOM.render(<ThemeProvider theme={theme}><CssBaseline /><Home /></ThemeProvider>, document.getElementById('root'));\n        if (localStorage.hasOwnProperty('cosmetics'))\n            socket.emit('cosmetics', JSON.parse(localStorage.cosmetics));\n    }\n});\n\nfunction displayConnectionFail(error) {\n    setTimeout(() => {\n        if (socket.disconnected) {\n            ReactDOM.render(<ThemeProvider theme={theme}><CssBaseline /><ConnectFailed error={error.toString()} /></ThemeProvider>, document.getElementById('root'));\n            socket.disconnect();\n        }\n    }, 10000);\n}\n\nsocket.on('connect_error', displayConnectionFail);\nsocket.on('connect_timeout', displayConnectionFail);\nsocket.on('disconnect', displayConnectionFail);\n\nsocket.on('err', (error='Unknown error', title='Error:') => {\n    showDialog({\n        layer: 'err',\n        title: title,\n        description: error,\n    });\n});\n\nsocket.on('noMatches', async () => {\n    let dialog = await showDialog({\n        title: 'No public matches available.',\n        description: 'Maybe create one yourself for people to join?',\n        buttonText: 'Create match with default options',\n        buttonAction: () => {\n            dialog.handleClose();\n            socket.emit('createMatch', {...defaultMatchOptions, public: true});\n        },\n    });\n});\n\nsocket.on('kicked', kicker => {\n    showDialog({\n        required: true,\n        title: 'Kicked!',\n        description: `${kicker} kicked you from the lobby.`,\n        buttonText: 'Back Home',\n        buttonAction: () => window.location.reload(),\n    });\n});\n\n/*\nsocket.on('disconnect', () => {\n    setTimeout(() => {\n        alert('Lost connection to the 8connect4 server.');\n        window.location.reload();\n    }, 200);\n});\n*/\n\nsocket.on('joinMatch', () => {\n});\n\nsocket.on('matchUpdate', matchInfo => {\n    if (!matchInfo.started)\n        ReactDOM.render(<ThemeProvider theme={theme}><CssBaseline /><Lobby matchInfo={matchInfo} /></ThemeProvider>, document.getElementById('root'));\n    showMatchOptions.changeOptions(matchInfo.options);\n});\n\nsocket.on('matchStart', matchInfo => gameplay.playMatch(matchInfo, socket.id));\nsocket.on('turnSwitch', newTurn => gameplay.switchTurn(newTurn));\nsocket.on('hover', (gameId, colour, column) => gameplay.hover(gameId, colour, column));\nsocket.on('move', (gameId, colour, column, row) => gameplay.move(gameId, colour, column, row));\nsocket.on('ts', (player, status) => gameplay.turnStatus(player, status));\nsocket.on('takenTurn', colour => gameplay.takenTurn(colour));\nsocket.on('outcomeDecided', (gameId, outcome) => gameplay.outcomeDecided(gameId, outcome));\nsocket.on('endMatch', (results, rjCode) => gameplay.endMatch(results, rjCode));\nsocket.on('rejoin', code => window.location.href = `/?${code}`);\n\nexport default socket;"],"sourceRoot":""}